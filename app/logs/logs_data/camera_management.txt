2023-09-19 19:44:34.054 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - <class 'dict'>
2023-09-19 19:44:34.059 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - Client IP: 172.23.0.1
2023-09-19 19:44:34.064 | INFO     | app.modules.camera_management.routers_v1:add_camera:46 - User-Agent: PostmanRuntime/7.29.2
2023-09-19 19:44:34.069 | INFO     | app.modules.camera_management.routers_v1:add_camera:80 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "3", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 0, 1919, 0, 0, 1079, 1919, 1079], "level": 0}], "lines": [{"name": "line1", "value": [50, 50, 800, 50, 100, 100], "level": 0}], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2023-09-19 19:44:34.108 | INFO     | app.modules.camera_management.routers_v1:add_camera:82 - source: None, source request: rtsp://172.19.20.183:8554/hi_counting
2023-09-19 19:44:34.112 | INFO     | app.modules.camera_management.services:add_cam_pipeline:120 - Add cam
2023-09-19 19:57:24.980 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - <class 'dict'>
2023-09-19 19:57:24.984 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - Client IP: 172.23.0.1
2023-09-19 19:57:24.988 | INFO     | app.modules.camera_management.routers_v1:add_camera:46 - User-Agent: PostmanRuntime/7.29.2
2023-09-19 19:57:24.993 | INFO     | app.modules.camera_management.routers_v1:add_camera:80 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "3", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 0, 1919, 0, 0, 1079, 1919, 1079], "level": 0}], "lines": [{"name": "line1", "value": [50, 50, 800, 50, 100, 100], "level": 0}], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2023-09-19 19:57:25.007 | INFO     | app.modules.camera_management.routers_v1:add_camera:82 - source: None, source request: rtsp://172.19.20.183:8554/hi_counting
2023-09-19 19:57:25.011 | INFO     | app.modules.camera_management.services:add_cam_pipeline:120 - Add cam
2023-09-19 19:57:37.131 | INFO     | app.modules.camera_management.services:add_cam_pipeline:134 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/409ed0f5cbd3421eb7b0b454ee803496
2023-09-19 19:57:37.137 | INFO     | app.modules.camera_management.services:add_cam_pipeline:150 - Add Fail
2023-09-19 19:57:37.141 | INFO     | app.modules.camera_management.services:add_cam_pipeline:152 - ===status_code: StatusCode.INSERT_ERROR
2023-09-19 20:01:37.885 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - <class 'dict'>
2023-09-19 20:01:37.889 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - Client IP: 172.23.0.1
2023-09-19 20:01:37.894 | INFO     | app.modules.camera_management.routers_v1:add_camera:46 - User-Agent: PostmanRuntime/7.29.2
2023-09-19 20:01:37.898 | INFO     | app.modules.camera_management.routers_v1:add_camera:80 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "3", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 0, 1919, 0, 0, 1079, 1919, 1079], "level": 0}], "lines": [{"name": "line1", "value": [50, 50, 800, 50, 100, 100], "level": 0}], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2023-09-19 20:01:37.903 | INFO     | app.modules.camera_management.routers_v1:add_camera:82 - source: None, source request: rtsp://172.19.20.183:8554/hi_counting
2023-09-19 20:01:37.907 | INFO     | app.modules.camera_management.services:add_cam_pipeline:120 - Add cam
2023-09-19 20:01:50.935 | INFO     | app.modules.camera_management.services:add_cam_pipeline:134 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/23e94766366a4944bc0602b7987695a8
2023-09-19 20:01:50.939 | INFO     | app.modules.camera_management.services:add_cam_pipeline:150 - Add Fail
2023-09-19 20:01:50.943 | INFO     | app.modules.camera_management.services:add_cam_pipeline:152 - ===status_code: StatusCode.INSERT_ERROR
2024-10-10 07:45:36.366 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - <class 'dict'>
2024-10-10 07:45:36.369 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - Client IP: 172.23.0.1
2024-10-10 07:45:36.582 | INFO     | app.modules.camera_management.routers_v1:add_camera:46 - User-Agent: PostmanRuntime/7.29.2
2024-10-10 07:45:36.629 | INFO     | app.modules.camera_management.routers_v1:add_camera:80 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "2", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 0, 1919, 0, 0, 1079, 1919, 1079], "level": 0}], "lines": [{"name": "line1", "value": [50, 50, 800, 50, 100, 100], "level": 0}], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-10-10 07:45:36.680 | INFO     | app.modules.camera_management.routers_v1:add_camera:82 - source: None, source request: rtsp://172.19.20.183:8554/hi_counting
2024-10-10 07:45:36.684 | INFO     | app.modules.camera_management.services:add_cam_pipeline:120 - Add cam
2024-10-10 07:45:41.653 | INFO     | app.modules.camera_management.services:add_cam_pipeline:134 - src_list: [SourceList(si_id='bangpc', user_id='bangpc', group_id='group1', location='LLQ', source_id='2', type='rtsp', enable=True, uri='rtsp://172.19.20.183:8554/hi_counting', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/015b7b54cd3c4ca39f5330b0c8b866fd', message='eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIyIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAwLCAxOTE5LCAwLCAwLCAxMDc5LCAxOTE5LCAxMDc5XSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbeyJuYW1lIjogImxpbmUxIiwgInZhbHVlIjogWzUwLCA1MCwgODAwLCA1MCwgMTAwLCAxMDBdLCAibGV2ZWwiOiAwfV0sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=False, video_event=False, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[{'name': 'zone1', 'value': [0, 0, 1919, 0, 0, 1079, 1919, 1079, 0, 0], 'level': 0, 'time_interval': 10.0, 'overlap_threshold': 0.5, 'margin': 10}], lines=[{'name': 'line1', 'value': [50, 50, 800, 50], 'level': 0, 'anchor': [100, 100]}], time_interval=10.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))], message: deepstream-0.vss:9089, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/015b7b54cd3c4ca39f5330b0c8b866fd
2024-10-10 07:45:41.707 | INFO     | app.modules.camera_management.services:add_cam_pipeline:139 - add success
2024-10-10 09:23:54.923 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - <class 'dict'>
2024-10-10 09:23:54.929 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - Client IP: 172.23.0.1
2024-10-10 09:23:54.975 | INFO     | app.modules.camera_management.routers_v1:add_camera:46 - User-Agent: PostmanRuntime/7.29.2
2024-10-10 09:23:54.979 | INFO     | app.modules.camera_management.routers_v1:add_camera:80 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "1", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 1080, 1920, 1080, 1920, 0, 0, 0], "level": 0}], "lines": [{"name": "line1", "value": [], "level": 0}], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-10-10 09:23:55.196 | INFO     | app.modules.camera_management.routers_v1:add_camera:82 - source: None, source request: rtsp://172.19.20.183:8554/hi_counting
2024-10-10 09:23:55.239 | INFO     | app.modules.camera_management.services:add_cam_pipeline:120 - Add cam
2024-10-10 09:24:03.386 | INFO     | app.modules.camera_management.services:add_cam_pipeline:134 - src_list: False, message: Line empty, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/be688b4db5b6427c8ffe818086e2a984
2024-10-10 09:24:03.431 | INFO     | app.modules.camera_management.services:add_cam_pipeline:150 - Line empty
2024-10-10 09:24:03.479 | INFO     | app.modules.camera_management.services:add_cam_pipeline:152 - ===status_code: StatusCode.INSERT_ERROR
2024-10-10 09:24:30.750 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - <class 'dict'>
2024-10-10 09:24:30.752 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - Client IP: 172.23.0.1
2024-10-10 09:24:30.797 | INFO     | app.modules.camera_management.routers_v1:add_camera:46 - User-Agent: PostmanRuntime/7.29.2
2024-10-10 09:24:30.800 | INFO     | app.modules.camera_management.routers_v1:add_camera:80 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "1", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 1080, 1920, 1080, 1920, 0, 0, 0], "level": 0}], "lines": [], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-10-10 09:24:30.852 | INFO     | app.modules.camera_management.routers_v1:add_camera:82 - source: None, source request: rtsp://172.19.20.183:8554/hi_counting
2024-10-10 09:24:30.896 | INFO     | app.modules.camera_management.services:add_cam_pipeline:120 - Add cam
2024-10-10 09:24:35.630 | INFO     | app.modules.camera_management.services:add_cam_pipeline:134 - src_list: [SourceList(si_id='bangpc', user_id='bangpc', group_id='group1', location='LLQ', source_id='1', type='rtsp', enable=True, uri='rtsp://172.19.20.183:8554/hi_counting', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/fa413ffc93d945529da2842da3a44912', message='eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAxMDgwLCAxOTIwLCAxMDgwLCAxOTIwLCAwLCAwLCAwXSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbXSwgInRpbWVfaW50ZXJ2YWwiOiAxMC4wLCAib3ZlcmxhcF90aHJlc2hvbGQiOiAwLjUsICJtYXJnaW4iOiAxMC4wLCAidGltZV90aHJlc2hvbGQiOiA2MC4wfX0=', ai_streaming_out=False, video_event=False, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[{'name': 'zone1', 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080], 'level': 0, 'time_interval': 10.0, 'overlap_threshold': 0.5, 'margin': 10}], lines=[], time_interval=10.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))], message: deepstream-0.vss:9089, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/fa413ffc93d945529da2842da3a44912
2024-10-10 09:24:35.692 | INFO     | app.modules.camera_management.services:add_cam_pipeline:139 - add success
2024-10-14 09:20:29.986 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - <class 'dict'>
2024-10-14 09:20:29.990 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - Client IP: 172.23.0.1
2024-10-14 09:20:29.994 | INFO     | app.modules.camera_management.routers_v1:add_camera:46 - User-Agent: PostmanRuntime/7.29.2
2024-10-14 09:20:29.998 | INFO     | app.modules.camera_management.routers_v1:add_camera:80 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "1", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 1080, 1920, 1080, 1920, 0, 0, 0], "level": 0}], "lines": [], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-10-14 09:20:30.019 | INFO     | app.modules.camera_management.routers_v1:add_camera:82 - source: rtsp://172.19.20.183:8554/hi_counting, source request: rtsp://172.19.20.183:8554/hi_counting
2024-10-14 09:20:30.024 | INFO     | app.modules.camera_management.services:update_cam_pipeline:360 - Update cam
2024-10-14 09:20:30.028 | INFO     | app.modules.camera_management.services:update_cam_pipeline:361 - Service_key: HI
2024-10-14 09:20:30.074 | INFO     | app.modules.camera_management.services:update_cam_pipeline:365 - instance_id: deepstream-0.vss:9089
2024-10-14 09:20:30.081 | INFO     | app.modules.camera_management.services:update_cam_pipeline:366 - source: rtsp://172.19.20.183:8554/hi_counting
2024-10-14 09:20:30.085 | INFO     | app.modules.camera_management.services:update_cam_pipeline:367 - endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/fa413ffc93d945529da2842da3a44912
2024-10-14 09:20:45.436 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - <class 'dict'>
2024-10-14 09:20:45.441 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - Client IP: 172.23.0.1
2024-10-14 09:20:45.487 | INFO     | app.modules.camera_management.routers_v1:add_camera:46 - User-Agent: PostmanRuntime/7.29.2
2024-10-14 09:20:45.534 | INFO     | app.modules.camera_management.routers_v1:add_camera:80 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "10", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 1080, 1920, 1080, 1920, 0, 0, 0], "level": 0}], "lines": [], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-10-14 09:20:45.541 | INFO     | app.modules.camera_management.routers_v1:add_camera:82 - source: None, source request: rtsp://172.19.20.183:8554/hi_counting
2024-10-14 09:20:45.545 | INFO     | app.modules.camera_management.services:add_cam_pipeline:120 - Add cam
2024-10-14 09:20:48.969 | INFO     | app.modules.camera_management.services:add_cam_pipeline:134 - src_list: [SourceList(si_id='bangpc', user_id='bangpc', group_id='group1', location='LLQ', source_id='10', type='rtsp', enable=True, uri='rtsp://172.19.20.183:8554/hi_counting', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/a9c9977dcf8c4735a4e8bbb34845a5eb', message='eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMCIsICJsb2NhdGlvbiI6ICJMTFEiLCAic291cmNlIjogInJ0c3A6Ly8xNzIuMTkuMjAuMTgzOjg1NTQvaGlfY291bnRpbmciLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IGZhbHNlLCAidmlkZW9fZXZlbnQiOiBmYWxzZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6IG51bGwsICJhdHRyaWJ1dGUiOiBudWxsLCAibGFuZG1hcmsiOiBudWxsLCAibGltaXRhdGlvbiI6IDAsICJtaW5fc2l6ZSI6IDIwLCAibWF4X3NpemUiOiA1MDAsICJubXNfdGhyZXNob2xkIjogMC41LCAiY29uZl90aHJlc2hvbGQiOiAwLjV9LCAiaGlfY29uZmlnIjogeyJ6b25lcyI6IFt7Im5hbWUiOiAiem9uZTEiLCAidmFsdWUiOiBbMCwgMTA4MCwgMTkyMCwgMTA4MCwgMTkyMCwgMCwgMCwgMF0sICJsZXZlbCI6IDB9XSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=False, video_event=False, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[{'name': 'zone1', 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080], 'level': 0, 'time_interval': 10.0, 'overlap_threshold': 0.5, 'margin': 10}], lines=[], time_interval=10.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))], message: deepstream-0.vss:9089, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/a9c9977dcf8c4735a4e8bbb34845a5eb
2024-10-14 09:20:49.026 | INFO     | app.modules.camera_management.services:add_cam_pipeline:139 - add success
2024-10-15 10:27:29.529 | INFO     | app.modules.camera_management.routers_v1:add_camera:43 - ===== Add Camera =====
2024-10-15 10:27:29.530 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - Client IP: 172.23.0.1
2024-10-15 10:27:29.536 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - User-Agent: PostmanRuntime/7.29.2
2024-10-15 10:27:29.543 | INFO     | app.modules.camera_management.routers_v1:add_camera:79 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "10", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 1080, 1920, 1080, 1920, 0, 0, 0], "level": 0}], "lines": [], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-10-15 10:27:29.604 | INFO     | app.modules.camera_management.routers_v1:add_camera:81 - source: rtsp://172.19.20.183:8554/hi_counting, source request: rtsp://172.19.20.183:8554/hi_counting
2024-10-15 10:27:29.613 | INFO     | app.modules.camera_management.services:update_cam_pipeline:357 - Update cam
2024-10-15 10:27:29.619 | INFO     | app.modules.camera_management.services:update_cam_pipeline:358 - Service_key: HI
2024-10-15 10:27:29.625 | INFO     | app.modules.camera_management.services:update_cam_pipeline:362 - instance_id: deepstream-0.vss:9089
2024-10-15 10:27:29.669 | INFO     | app.modules.camera_management.services:update_cam_pipeline:363 - source: rtsp://172.19.20.183:8554/hi_counting
2024-10-15 10:27:29.674 | INFO     | app.modules.camera_management.services:update_cam_pipeline:364 - endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/a9c9977dcf8c4735a4e8bbb34845a5eb
2024-10-15 10:31:45.899 | INFO     | app.modules.camera_management.routers_v1:add_camera:43 - ===== Add Camera =====
2024-10-15 10:31:45.899 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - Client IP: 172.23.0.1
2024-10-15 10:31:45.903 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - User-Agent: PostmanRuntime/7.29.2
2024-10-15 10:31:45.907 | INFO     | app.modules.camera_management.routers_v1:add_camera:79 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "10", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 1080, 1920, 1080, 1920, 0, 0, 0], "level": 0}], "lines": [], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-10-15 10:31:45.922 | INFO     | app.modules.camera_management.routers_v1:add_camera:81 - source: rtsp://172.19.20.183:8554/hi_counting, source request: rtsp://172.19.20.183:8554/hi_counting
2024-10-15 10:31:45.927 | INFO     | app.modules.camera_management.services:update_cam_pipeline:357 - Update cam
2024-10-15 10:31:45.932 | INFO     | app.modules.camera_management.services:update_cam_pipeline:358 - Service_key: HI
2024-10-15 10:31:45.938 | INFO     | app.modules.camera_management.services:update_cam_pipeline:362 - instance_id: deepstream-0.vss:9089
2024-10-15 10:31:45.985 | INFO     | app.modules.camera_management.services:update_cam_pipeline:363 - source: rtsp://172.19.20.183:8554/hi_counting
2024-10-15 10:31:45.989 | INFO     | app.modules.camera_management.services:update_cam_pipeline:364 - endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/a9c9977dcf8c4735a4e8bbb34845a5eb
2024-10-15 10:37:36.876 | INFO     | app.modules.camera_management.routers_v1:add_camera:43 - ===== Add Camera =====
2024-10-15 10:37:36.892 | INFO     | app.modules.camera_management.routers_v1:add_camera:44 - Client IP: 172.23.0.1
2024-10-15 10:37:36.924 | INFO     | app.modules.camera_management.routers_v1:add_camera:45 - User-Agent: PostmanRuntime/7.29.2
2024-10-15 10:37:36.928 | INFO     | app.modules.camera_management.routers_v1:add_camera:79 - Request: {"si": {"si_id": "bangpc", "si_name": "bangpc", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "bangpc", "user_name": "bangpc", "user_group": "group1"}, "service_key": "HI", "cam_info": {"cam_id": "10", "location": "LLQ", "source": "rtsp://172.19.20.183:8554/hi_counting", "accessKey": "string", "endpoint": "string", "ai_streaming_out": false, "video_event": false}, "ai_config": {"dist_type": null, "attribute": null, "landmark": null, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [{"name": "zone1", "value": [0, 1080, 1920, 1080, 1920, 0, 0, 0], "level": 0}], "lines": [], "time_interval": 10.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-10-15 10:37:36.945 | INFO     | app.modules.camera_management.routers_v1:add_camera:81 - source: rtsp://172.19.20.183:8554/hi_counting, source request: rtsp://172.19.20.183:8554/hi_counting
2024-10-15 10:37:36.950 | INFO     | app.modules.camera_management.services:update_cam_pipeline:357 - Update cam
2024-10-15 10:37:36.953 | INFO     | app.modules.camera_management.services:update_cam_pipeline:358 - Service_key: HI
2024-10-15 10:37:36.959 | INFO     | app.modules.camera_management.services:update_cam_pipeline:362 - instance_id: deepstream-0.vss:9089
2024-10-15 10:37:37.004 | INFO     | app.modules.camera_management.services:update_cam_pipeline:363 - source: rtsp://172.19.20.183:8554/hi_counting
2024-10-15 10:37:37.049 | INFO     | app.modules.camera_management.services:update_cam_pipeline:364 - endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/a9c9977dcf8c4735a4e8bbb34845a5eb
2024-11-04 08:35:33.142 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:35:33.143 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:35:33.146 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:35:33.150 | INFO     | app.modules.camera_management.routers.router:add_camera:79 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:37:18.376 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:37:18.377 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:37:18.399 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:37:18.403 | INFO     | app.modules.camera_management.services.services:add_camera:431 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:37:18.420 | INFO     | app.modules.camera_management.services.services:add_camera:446 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 432, in add_camera
    check_cam, source_uri = check_cam_id_exist(logger, streaming)
NameError: name 'logger' is not defined

2024-11-04 08:40:23.594 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:40:23.597 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:40:23.600 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:40:23.604 | INFO     | app.modules.camera_management.services.services:add_camera:431 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:40:23.622 | INFO     | app.modules.camera_management.services.services:add_camera:446 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 432, in add_camera
    check_cam, source_uri = check_cam_id_exist(logger, streaming)
NameError: name 'logger' is not defined

2024-11-04 08:40:48.010 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:40:48.010 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:40:48.014 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:40:48.017 | INFO     | app.modules.camera_management.services.services:add_camera:431 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:40:48.040 | INFO     | app.modules.camera_management.services.services:add_camera:446 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 432, in add_camera
    check_cam, source_uri = check_cam_id_exist(self.logger, streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/utils.py", line 217, in check_cam_id_exist
    check_cam = CameraModel.find_one({
TypeError: MongoDB.find_one() missing 2 required positional arguments: 'col_name' and 'query'

2024-11-04 08:43:14.106 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:43:14.110 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:43:14.117 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:43:14.121 | INFO     | app.modules.camera_management.services.services:add_camera:431 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:43:14.189 | INFO     | app.modules.camera_management.services.services:add_camera:446 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 432, in add_camera
    check_cam, source_uri = check_cam_id_exist(self.logger, streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/utils.py", line 217, in check_cam_id_exist
    check_cam = CameraModel.find_one_cam({
  File "/workspace/refactor/vss_controller/app/modules/camera_management/models/models.py", line 171, in find_one_cam
    return MongoDB.find_one_plant_heatmap(
AttributeError: type object 'MongoDB' has no attribute 'find_one_plant_heatmap'

2024-11-04 08:44:18.181 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:44:18.181 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:44:18.185 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:44:18.190 | INFO     | app.modules.camera_management.services.services:add_camera:431 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:44:18.215 | INFO     | app.modules.camera_management.services.services:add_camera:446 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 432, in add_camera
    check_cam, source_uri = check_cam_id_exist(self.logger, streaming)
TypeError: cannot unpack non-iterable bool object

2024-11-04 08:48:35.240 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:48:35.242 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:48:35.246 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:48:35.250 | INFO     | app.modules.camera_management.services.services:add_camera:431 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:48:35.289 | INFO     | app.modules.camera_management.services.services:add_camera:446 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 432, in add_camera
    check_cam, source_uri = check_cam_id_exist(self.logger, streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/utils.py", line 208, in check_cam_id_exist
    check_cam = CameraModel.find_one_camm({
AttributeError: type object 'CameraModel' has no attribute 'find_one_camm'

2024-11-04 08:49:10.992 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:49:10.993 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:49:10.996 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:49:10.999 | INFO     | app.modules.camera_management.services.services:add_camera:431 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:49:11.032 | INFO     | app.modules.camera_management.services.services:add_camera:446 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 432, in add_camera
    check_cam, source_uri = check_cam_id_exist(self.logger, streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/utils.py", line 211, in check_cam_id_exist
    check_si = SIModel.find_one_si({
  File "/workspace/refactor/vss_controller/app/modules/camera_management/models/models.py", line 373, in find_one_si
    return MongoDB.find_one_plant_heatmap(
AttributeError: type object 'MongoDB' has no attribute 'find_one_plant_heatmap'

2024-11-04 08:49:48.977 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:49:48.978 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:49:48.981 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:49:48.988 | INFO     | app.modules.camera_management.services.services:add_camera:431 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:49:49.028 | INFO     | app.modules.camera_management.services.services:add_camera:446 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 432, in add_camera
    check_cam, source_uri = check_cam_id_exist(self.logger, streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/utils.py", line 214, in check_cam_id_exist
    check_user = UserModel.find_one_user({
  File "/workspace/refactor/vss_controller/app/modules/camera_management/models/models.py", line 489, in find_one_user
    return MongoDB.find_one_plant_heatmap(
AttributeError: type object 'MongoDB' has no attribute 'find_one_plant_heatmap'

2024-11-04 08:50:26.081 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:50:26.082 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:50:26.089 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:50:26.097 | INFO     | app.modules.camera_management.services.services:add_camera:431 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:50:26.117 | INFO     | app.modules.camera_management.services.services:add_camera:433 - source: None, source request: string
2024-11-04 08:50:26.122 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:81 - Add cam
2024-11-04 08:50:26.153 | INFO     | app.modules.camera_management.services.services:add_camera:446 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 435, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 82, in add_cam_pipeline
    info = DSClient.insert_cam(self.logger, streaming, None)
NameError: name 'DSClient' is not defined

2024-11-04 08:55:35.327 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 08:55:35.327 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 08:55:35.331 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 08:55:35.335 | INFO     | app.modules.camera_management.services.services:add_camera:432 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 08:55:35.349 | INFO     | app.modules.camera_management.services.services:add_camera:434 - source: None, source request: string
2024-11-04 08:55:35.351 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:82 - Add cam
2024-11-04 08:55:35.400 | INFO     | app.modules.camera_management.services.services:add_camera:447 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 436, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 83, in add_cam_pipeline
    info = DSClient.insert_cam(self.logger, streaming, None)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 373, in insert_cam
    if not DSClient.test_rtsp_link_with_timeout(logger, uri):
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 753, in test_rtsp_link_with_timeout
    return result.get(timeout=timeout)
  File "/usr/lib/python3.10/multiprocessing/pool.py", line 774, in get
    raise self._value
  File "/usr/lib/python3.10/multiprocessing/pool.py", line 540, in _handle_tasks
    put(task)
  File "/usr/lib/python3.10/multiprocessing/connection.py", line 206, in send
    self._send_bytes(_ForkingPickler.dumps(obj))
  File "/usr/lib/python3.10/multiprocessing/reduction.py", line 51, in dumps
    cls(buf, protocol).dump(obj)
TypeError: cannot pickle '_io.TextIOWrapper' object

2024-11-04 09:00:36.951 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 09:00:36.951 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 09:00:36.955 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 09:00:36.959 | INFO     | app.modules.camera_management.services.services:add_camera:432 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 09:00:36.973 | INFO     | app.modules.camera_management.services.services:add_camera:434 - source: None, source request: string
2024-11-04 09:00:36.975 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:82 - Add cam
2024-11-04 09:00:37.154 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:375 - Link rtsp failed
2024-11-04 09:00:37.157 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:87 - src_list: False, message: Link rtsp failed, endpoint: 
2024-11-04 09:00:37.160 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:109 - Link rtsp failed
2024-11-04 09:19:01.646 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 09:19:01.646 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 09:19:01.649 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 09:19:01.653 | INFO     | app.modules.camera_management.services.services:add_camera:432 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 09:19:01.668 | INFO     | app.modules.camera_management.services.services:add_camera:434 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-04 09:19:01.671 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:82 - Add cam
2024-11-04 09:19:02.895 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.2200617790222168
2024-11-04 09:19:02.899 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/f40542fb20c84209852b872862a589d7', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAic3RyaW5nIiwgImNhbV9pbmZvIjogeyJjYW1faWQiOiAic3RyaW5nIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-04 09:19:02.901 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:454 - service_key != ['FACE_RECOGNITION', 'HEATMAP', 'HI', 'HI_THERMAL', 'COUNTING', 'ATTRIBUTES', 'VHD_LPD_LPR', 'LPD_LPR', 'PARKING_LOT']
2024-11-04 09:19:02.904 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:87 - src_list: False, message: service_key != ['FACE_RECOGNITION', 'HEATMAP', 'HI', 'HI_THERMAL', 'COUNTING', 'ATTRIBUTES', 'VHD_LPD_LPR', 'LPD_LPR', 'PARKING_LOT'], endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/f40542fb20c84209852b872862a589d7
2024-11-04 09:19:02.907 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:109 - service_key != ['FACE_RECOGNITION', 'HEATMAP', 'HI', 'HI_THERMAL', 'COUNTING', 'ATTRIBUTES', 'VHD_LPD_LPR', 'LPD_LPR', 'PARKING_LOT']
2024-11-04 09:19:39.873 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 09:19:39.875 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 09:19:39.879 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 09:19:39.883 | INFO     | app.modules.camera_management.services.services:add_camera:432 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "FACE_RECOGNITION", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 09:19:39.899 | INFO     | app.modules.camera_management.services.services:add_camera:434 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-04 09:19:39.901 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:82 - Add cam
2024-11-04 09:19:40.986 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.081610918045044
2024-11-04 09:19:40.991 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/6f0ea34175234c99ae20b6e27e21cc45', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiRkFDRV9SRUNPR05JVElPTiIsICJjYW1faW5mbyI6IHsiY2FtX2lkIjogInN0cmluZyIsICJsb2NhdGlvbiI6ICJzdHJpbmciLCAic291cmNlIjogInJ0c3A6Ly8xNzIuMTkuMjAuMjAwOjMxNTU0L252c3RyZWFtL2hvbWUvdnN0L3ZzdF9yZWxlYXNlL3N0cmVhbWVyX3ZpZGVvcy9GUl8xNDEubXA0IiwgImFjY2Vzc0tleSI6ICJzdHJpbmciLCAiZW5kcG9pbnQiOiAic3RyaW5nIiwgImFpX3N0cmVhbWluZ19vdXQiOiB0cnVlLCAidmlkZW9fZXZlbnQiOiB0cnVlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogInN0cmluZyIsICJhdHRyaWJ1dGUiOiBbInN0cmluZyJdLCAibGFuZG1hcmsiOiB0cnVlLCAibGltaXRhdGlvbiI6IDAsICJtaW5fc2l6ZSI6IDIwLCAibWF4X3NpemUiOiA1MDAsICJubXNfdGhyZXNob2xkIjogMC41LCAiY29uZl90aHJlc2hvbGQiOiAwLjV9LCAiaGlfY29uZmlnIjogeyJ6b25lcyI6IFtdLCAibGluZXMiOiBbXSwgInRpbWVfaW50ZXJ2YWwiOiAzMC4wLCAib3ZlcmxhcF90aHJlc2hvbGQiOiAwLjUsICJtYXJnaW4iOiAxMC4wLCAidGltZV90aHJlc2hvbGQiOiA2MC4wfX0=', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=False, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-04 09:19:41.002 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: face_detection
2024-11-04 09:19:41.056 | INFO     | app.modules.camera_management.services.services:add_camera:447 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 436, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 83, in add_cam_pipeline
    info = DSClient.insert_cam(self.logger, streaming, None)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 463, in insert_cam
    instance_info = DSClient.check_instance_ds(logger, request_solution)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 209, in check_instance_ds
    instance_list = DSClient.get_instance_list()
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
TypeError: DSClient.get_instance_list() missing 1 required positional argument: 'logger'

2024-11-04 09:21:06.990 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 09:21:06.990 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 09:21:06.994 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 09:21:06.998 | INFO     | app.modules.camera_management.services.services:add_camera:432 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "FACE_RECOGNITION", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 09:21:07.011 | INFO     | app.modules.camera_management.services.services:add_camera:434 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-04 09:21:07.013 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:82 - Add cam
2024-11-04 09:21:08.112 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.0944678783416748
2024-11-04 09:21:08.117 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/7883fed427684d4abd7b7c260dc58f50', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiRkFDRV9SRUNPR05JVElPTiIsICJjYW1faW5mbyI6IHsiY2FtX2lkIjogInN0cmluZyIsICJsb2NhdGlvbiI6ICJzdHJpbmciLCAic291cmNlIjogInJ0c3A6Ly8xNzIuMTkuMjAuMjAwOjMxNTU0L252c3RyZWFtL2hvbWUvdnN0L3ZzdF9yZWxlYXNlL3N0cmVhbWVyX3ZpZGVvcy9GUl8xNDEubXA0IiwgImFjY2Vzc0tleSI6ICJzdHJpbmciLCAiZW5kcG9pbnQiOiAic3RyaW5nIiwgImFpX3N0cmVhbWluZ19vdXQiOiB0cnVlLCAidmlkZW9fZXZlbnQiOiB0cnVlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogInN0cmluZyIsICJhdHRyaWJ1dGUiOiBbInN0cmluZyJdLCAibGFuZG1hcmsiOiB0cnVlLCAibGltaXRhdGlvbiI6IDAsICJtaW5fc2l6ZSI6IDIwLCAibWF4X3NpemUiOiA1MDAsICJubXNfdGhyZXNob2xkIjogMC41LCAiY29uZl90aHJlc2hvbGQiOiAwLjV9LCAiaGlfY29uZmlnIjogeyJ6b25lcyI6IFtdLCAibGluZXMiOiBbXSwgInRpbWVfaW50ZXJ2YWwiOiAzMC4wLCAib3ZlcmxhcF90aHJlc2hvbGQiOiAwLjUsICJtYXJnaW4iOiAxMC4wLCAidGltZV90aHJlc2hvbGQiOiA2MC4wfX0=', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=False, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-04 09:21:08.126 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: face_detection
2024-11-04 09:21:08.130 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('67078625eab89bc666228c7f'), 'Cam_info': {'cam_id': '2', 'location': 'LLQ', 'source': 'rtsp://172.19.20.183:8554/hi_counting', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a@@172.21.5.197:31888/015b7b54cd3c4ca39f5330b0c8b866fd', 'ai_streaming_out': False, 'video_event': False, 'si_id': 'bangpc', 'user_id': 'bangpc', 'service_key': 'HI', 'group_id': 'group1'}, 'instance_id': 'deepstream-0.vss:9089', 'hi_config': {'zones': [{'name': 'zone1', 'value': [0, 0, 1919, 0, 0, 1079, 1919, 1079, 0, 0], 'level': 0, 'time_interval': 10.0, 'overlap_threshold': 0.5, 'margin': 10}], 'lines': [{'name': 'line1', 'value': [50, 50, 800, 50], 'level': 0, 'anchor': [100, 100]}], 'time_interval': 10.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}, 'sink': None}, {'_id': ObjectId('67079d53eab89bc666228c80'), 'Cam_info': {'cam_id': '1', 'location': 'LLQ', 'source': 'rtsp://172.19.20.183:8554/hi_counting', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a@@172.21.5.197:31888/fa413ffc93d945529da2842da3a44912', 'ai_streaming_out': False, 'video_event': False, 'si_id': 'bangpc', 'user_id': 'bangpc', 'service_key': 'HI', 'group_id': 'group1'}, 'instance_id': 'deepstream-0.vss:9089', 'hi_config': {'zones': [{'name': 'zone1', 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080], 'level': 0, 'time_interval': 10.0, 'overlap_threshold': 0.5, 'margin': 10}], 'lines': [], 'time_interval': 10.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}, 'sink': None}, {'_id': ObjectId('670e45f1197fdd88ffb6d4db'), 'Cam_info': {'cam_id': '10', 'location': 'LLQ', 'source': 'rtsp://172.19.20.183:8554/hi_counting', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a@@172.21.5.197:31888/a9c9977dcf8c4735a4e8bbb34845a5eb', 'ai_streaming_out': False, 'video_event': False, 'si_id': 'bangpc', 'user_id': 'bangpc', 'service_key': None, 'group_id': 'group1'}, 'instance_id': 'deepstream-0.vss:9089', 'hi_config': {'zones': [{'name': 'zone1', 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080], 'level': 0, 'time_interval': 10.0, 'overlap_threshold': 0.5, 'margin': 10}], 'lines': [], 'time_interval': 10.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}, 'sink': None}]
2024-11-04 09:21:08.153 | INFO     | app.modules.camera_management.services.services:add_camera:447 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 436, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 83, in add_cam_pipeline
    info = DSClient.insert_cam(self.logger, streaming, None)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 463, in insert_cam
    instance_info = DSClient.check_instance_ds(logger, request_solution)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 209, in check_instance_ds
    instance_list = DSClient.get_instance_list(logger)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 187, in get_instance_list
    address_list = [f"{x['pod_name']}.{x['pod_service_name']}:{x['service_port']}" for x in pod_list]
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 187, in <listcomp>
    address_list = [f"{x['pod_name']}.{x['pod_service_name']}:{x['service_port']}" for x in pod_list]
KeyError: 'pod_name'

2024-11-04 09:28:34.271 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 09:28:34.271 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 09:28:34.278 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 09:28:34.282 | INFO     | app.modules.camera_management.services.services:add_camera:432 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "FACE_RECOGNITION", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 09:28:34.296 | INFO     | app.modules.camera_management.services.services:add_camera:434 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-04 09:28:34.298 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:82 - Add cam
2024-11-04 09:28:35.420 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.1181831359863281
2024-11-04 09:28:35.426 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/1797fbc8297c4d1eaba989ba6859abc2', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiRkFDRV9SRUNPR05JVElPTiIsICJjYW1faW5mbyI6IHsiY2FtX2lkIjogInN0cmluZyIsICJsb2NhdGlvbiI6ICJzdHJpbmciLCAic291cmNlIjogInJ0c3A6Ly8xNzIuMTkuMjAuMjAwOjMxNTU0L252c3RyZWFtL2hvbWUvdnN0L3ZzdF9yZWxlYXNlL3N0cmVhbWVyX3ZpZGVvcy9GUl8xNDEubXA0IiwgImFjY2Vzc0tleSI6ICJzdHJpbmciLCAiZW5kcG9pbnQiOiAic3RyaW5nIiwgImFpX3N0cmVhbWluZ19vdXQiOiB0cnVlLCAidmlkZW9fZXZlbnQiOiB0cnVlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogInN0cmluZyIsICJhdHRyaWJ1dGUiOiBbInN0cmluZyJdLCAibGFuZG1hcmsiOiB0cnVlLCAibGltaXRhdGlvbiI6IDAsICJtaW5fc2l6ZSI6IDIwLCAibWF4X3NpemUiOiA1MDAsICJubXNfdGhyZXNob2xkIjogMC41LCAiY29uZl90aHJlc2hvbGQiOiAwLjV9LCAiaGlfY29uZmlnIjogeyJ6b25lcyI6IFtdLCAibGluZXMiOiBbXSwgInRpbWVfaW50ZXJ2YWwiOiAzMC4wLCAib3ZlcmxhcF90aHJlc2hvbGQiOiAwLjUsICJtYXJnaW4iOiAxMC4wLCAidGltZV90aHJlc2hvbGQiOiA2MC4wfX0=', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=False, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-04 09:28:35.432 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: face_detection
2024-11-04 09:28:35.473 | INFO     | app.modules.camera_management.services.services:add_camera:447 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 436, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 83, in add_cam_pipeline
    info = DSClient.insert_cam(self.logger, streaming, None)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 463, in insert_cam
    instance_info = DSClient.check_instance_ds(logger, request_solution)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 209, in check_instance_ds
    instance_list = DSClient.get_instance_list(logger)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 185, in get_instance_list
    pod_list = InstanceInfoModel.find_all_instance_info()
NameError: name 'InstanceInfoModel' is not defined

2024-11-04 09:31:09.108 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 09:31:09.111 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 09:31:09.114 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 09:31:09.118 | INFO     | app.modules.camera_management.services.services:add_camera:432 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "FACE_RECOGNITION", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 09:31:09.134 | INFO     | app.modules.camera_management.services.services:add_camera:434 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-04 09:31:09.136 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:82 - Add cam
2024-11-04 09:31:10.238 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.0987091064453125
2024-11-04 09:31:10.244 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/a579ced0824f4960a5d8acc64bb24b86', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiRkFDRV9SRUNPR05JVElPTiIsICJjYW1faW5mbyI6IHsiY2FtX2lkIjogInN0cmluZyIsICJsb2NhdGlvbiI6ICJzdHJpbmciLCAic291cmNlIjogInJ0c3A6Ly8xNzIuMTkuMjAuMjAwOjMxNTU0L252c3RyZWFtL2hvbWUvdnN0L3ZzdF9yZWxlYXNlL3N0cmVhbWVyX3ZpZGVvcy9GUl8xNDEubXA0IiwgImFjY2Vzc0tleSI6ICJzdHJpbmciLCAiZW5kcG9pbnQiOiAic3RyaW5nIiwgImFpX3N0cmVhbWluZ19vdXQiOiB0cnVlLCAidmlkZW9fZXZlbnQiOiB0cnVlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogInN0cmluZyIsICJhdHRyaWJ1dGUiOiBbInN0cmluZyJdLCAibGFuZG1hcmsiOiB0cnVlLCAibGltaXRhdGlvbiI6IDAsICJtaW5fc2l6ZSI6IDIwLCAibWF4X3NpemUiOiA1MDAsICJubXNfdGhyZXNob2xkIjogMC41LCAiY29uZl90aHJlc2hvbGQiOiAwLjV9LCAiaGlfY29uZmlnIjogeyJ6b25lcyI6IFtdLCAibGluZXMiOiBbXSwgInRpbWVfaW50ZXJ2YWwiOiAzMC4wLCAib3ZlcmxhcF90aHJlc2hvbGQiOiAwLjUsICJtYXJnaW4iOiAxMC4wLCAidGltZV90aHJlc2hvbGQiOiA2MC4wfX0=', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=False, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-04 09:31:10.257 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: face_detection
2024-11-04 09:31:10.262 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-04 09:31:10.264 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:188 - ['deepstream-0.vss:9089']
2024-11-04 09:31:10.267 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:210 - ===Time get instance list: 0.00709843635559082
2024-11-04 09:31:10.270 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - instance_list: ['deepstream-0.vss:9089']
2024-11-04 09:31:10.289 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:245 - ===Time get number camera: 0.012722015380859375
2024-11-04 09:31:10.291 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get all config: 0.003171205520629883
2024-11-04 09:31:10.295 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': True}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/015b7b54cd3c4ca39f5330b0c8b866fd', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'lines': [{'anchor': [100, 100], 'name': 'line1', 'value': [50, 50, 800, 50]}], 'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 0, 1919, 0, 0, 1079, 1919, 1079, 0, 0]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIyIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAwLCAxOTE5LCAwLCAwLCAxMDc5LCAxOTE5LCAxMDc5XSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbeyJuYW1lIjogImxpbmUxIiwgInZhbHVlIjogWzUwLCA1MCwgODAwLCA1MCwgMTAwLCAxMDBdLCAibGV2ZWwiOiAwfV0sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'bangpc', 'source_id': '2', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/fa413ffc93d945529da2842da3a44912', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAxMDgwLCAxOTIwLCAxMDgwLCAxOTIwLCAwLCAwLCAwXSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbXSwgInRpbWVfaW50ZXJ2YWwiOiAxMC4wLCAib3ZlcmxhcF90aHJlc2hvbGQiOiAwLjUsICJtYXJnaW4iOiAxMC4wLCAidGltZV90aHJlc2hvbGQiOiA2MC4wfX0=', 'si_id': 'bangpc', 'source_id': '1', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/23e94766366a4944bc0602b7987695a8', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'lines': [{'anchor': [100, 100], 'name': 'line1', 'value': [50, 50, 800, 50]}], 'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 0, 1919, 0, 0, 1079, 1919, 1079, 0, 0]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIzIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAwLCAxOTE5LCAwLCAwLCAxMDc5LCAxOTE5LCAxMDc5XSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbeyJuYW1lIjogImxpbmUxIiwgInZhbHVlIjogWzUwLCA1MCwgODAwLCA1MCwgMTAwLCAxMDBdLCAibGV2ZWwiOiAwfV0sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'bangpc', 'source_id': '3', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a9c9977dcf8c4735a4e8bbb34845a5eb', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMCIsICJsb2NhdGlvbiI6ICJMTFEiLCAic291cmNlIjogInJ0c3A6Ly8xNzIuMTkuMjAuMTgzOjg1NTQvaGlfY291bnRpbmciLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IGZhbHNlLCAidmlkZW9fZXZlbnQiOiBmYWxzZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6IG51bGwsICJhdHRyaWJ1dGUiOiBudWxsLCAibGFuZG1hcmsiOiBudWxsLCAibGltaXRhdGlvbiI6IDAsICJtaW5fc2l6ZSI6IDIwLCAibWF4X3NpemUiOiA1MDAsICJubXNfdGhyZXNob2xkIjogMC41LCAiY29uZl90aHJlc2hvbGQiOiAwLjV9LCAiaGlfY29uZmlnIjogeyJ6b25lcyI6IFt7Im5hbWUiOiAiem9uZTEiLCAidmFsdWUiOiBbMCwgMTA4MCwgMTkyMCwgMTA4MCwgMTkyMCwgMCwgMCwgMF0sICJsZXZlbCI6IDB9XSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'bangpc', 'source_id': '10', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-04 09:31:10.298 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:258 - config: human_intrusion
2024-11-04 09:31:10.302 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:261 - =====Time 1: 0.0037963390350341797
2024-11-04 09:31:10.305 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:265 - ===Time 11: 0.03149771690368652
2024-11-04 09:31:10.308 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:278 - =====Time 2: 0.03469681739807129
2024-11-04 09:31:10.311 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:296 - =====Time all check instance ds: 0.05075263977050781
2024-11-04 09:31:10.314 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time sort instance: 1.1205673217773438e-05
2024-11-04 09:31:10.317 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}]
2024-11-04 09:31:10.321 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:464 - ====Time check instance ds: 0.06047368049621582
2024-11-04 09:31:10.325 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:471 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}
2024-11-04 09:31:10.328 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:490 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}
2024-11-04 09:31:10.332 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:87 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/a579ced0824f4960a5d8acc64bb24b86
2024-11-04 09:31:10.335 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:109 - Add Fail
2024-11-04 09:35:50.661 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 09:35:50.663 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 09:35:50.668 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 09:35:50.672 | INFO     | app.modules.camera_management.services.services:add_camera:432 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HUMAN_INTRUSION", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 09:35:50.685 | INFO     | app.modules.camera_management.services.services:add_camera:434 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-04 09:35:50.688 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:82 - Add cam
2024-11-04 09:35:51.773 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.0821616649627686
2024-11-04 09:35:51.778 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/96b8655f36ff44eeb52500e80f1bc557', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSFVNQU5fSU5UUlVTSU9OIiwgImNhbV9pbmZvIjogeyJjYW1faWQiOiAic3RyaW5nIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-04 09:35:51.780 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:454 - service_key != ['FACE_RECOGNITION', 'HEATMAP', 'HI', 'HI_THERMAL', 'COUNTING', 'ATTRIBUTES', 'VHD_LPD_LPR', 'LPD_LPR', 'PARKING_LOT']
2024-11-04 09:35:51.784 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:87 - src_list: False, message: service_key != ['FACE_RECOGNITION', 'HEATMAP', 'HI', 'HI_THERMAL', 'COUNTING', 'ATTRIBUTES', 'VHD_LPD_LPR', 'LPD_LPR', 'PARKING_LOT'], endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/96b8655f36ff44eeb52500e80f1bc557
2024-11-04 09:35:51.786 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:109 - service_key != ['FACE_RECOGNITION', 'HEATMAP', 'HI', 'HI_THERMAL', 'COUNTING', 'ATTRIBUTES', 'VHD_LPD_LPR', 'LPD_LPR', 'PARKING_LOT']
2024-11-04 09:36:00.951 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 09:36:00.954 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 09:36:00.958 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 09:36:00.963 | INFO     | app.modules.camera_management.services.services:add_camera:432 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 09:36:00.970 | INFO     | app.modules.camera_management.services.services:add_camera:434 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-04 09:36:00.973 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:82 - Add cam
2024-11-04 09:36:02.082 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.1034126281738281
2024-11-04 09:36:02.088 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/7cdca8d1595b47a5bf718b8b7bfe6092', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-04 09:36:02.100 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: human_intrusion
2024-11-04 09:36:02.103 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-04 09:36:02.105 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:188 - ['deepstream-0.vss:9089']
2024-11-04 09:36:02.109 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:210 - ===Time get instance list: 0.006426811218261719
2024-11-04 09:36:02.111 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - instance_list: ['deepstream-0.vss:9089']
2024-11-04 09:36:02.121 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:245 - ===Time get number camera: 0.0037543773651123047
2024-11-04 09:36:02.123 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get all config: 0.002882719039916992
2024-11-04 09:36:02.127 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': True}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/015b7b54cd3c4ca39f5330b0c8b866fd', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'lines': [{'anchor': [100, 100], 'name': 'line1', 'value': [50, 50, 800, 50]}], 'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 0, 1919, 0, 0, 1079, 1919, 1079, 0, 0]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIyIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAwLCAxOTE5LCAwLCAwLCAxMDc5LCAxOTE5LCAxMDc5XSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbeyJuYW1lIjogImxpbmUxIiwgInZhbHVlIjogWzUwLCA1MCwgODAwLCA1MCwgMTAwLCAxMDBdLCAibGV2ZWwiOiAwfV0sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'bangpc', 'source_id': '2', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/fa413ffc93d945529da2842da3a44912', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAxMDgwLCAxOTIwLCAxMDgwLCAxOTIwLCAwLCAwLCAwXSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbXSwgInRpbWVfaW50ZXJ2YWwiOiAxMC4wLCAib3ZlcmxhcF90aHJlc2hvbGQiOiAwLjUsICJtYXJnaW4iOiAxMC4wLCAidGltZV90aHJlc2hvbGQiOiA2MC4wfX0=', 'si_id': 'bangpc', 'source_id': '1', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/23e94766366a4944bc0602b7987695a8', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'lines': [{'anchor': [100, 100], 'name': 'line1', 'value': [50, 50, 800, 50]}], 'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 0, 1919, 0, 0, 1079, 1919, 1079, 0, 0]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIzIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAwLCAxOTE5LCAwLCAwLCAxMDc5LCAxOTE5LCAxMDc5XSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbeyJuYW1lIjogImxpbmUxIiwgInZhbHVlIjogWzUwLCA1MCwgODAwLCA1MCwgMTAwLCAxMDBdLCAibGV2ZWwiOiAwfV0sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'bangpc', 'source_id': '3', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a9c9977dcf8c4735a4e8bbb34845a5eb', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMCIsICJsb2NhdGlvbiI6ICJMTFEiLCAic291cmNlIjogInJ0c3A6Ly8xNzIuMTkuMjAuMTgzOjg1NTQvaGlfY291bnRpbmciLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IGZhbHNlLCAidmlkZW9fZXZlbnQiOiBmYWxzZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6IG51bGwsICJhdHRyaWJ1dGUiOiBudWxsLCAibGFuZG1hcmsiOiBudWxsLCAibGltaXRhdGlvbiI6IDAsICJtaW5fc2l6ZSI6IDIwLCAibWF4X3NpemUiOiA1MDAsICJubXNfdGhyZXNob2xkIjogMC41LCAiY29uZl90aHJlc2hvbGQiOiAwLjV9LCAiaGlfY29uZmlnIjogeyJ6b25lcyI6IFt7Im5hbWUiOiAiem9uZTEiLCAidmFsdWUiOiBbMCwgMTA4MCwgMTkyMCwgMTA4MCwgMTkyMCwgMCwgMCwgMF0sICJsZXZlbCI6IDB9XSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'bangpc', 'source_id': '10', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-04 09:36:02.130 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:258 - config: human_intrusion
2024-11-04 09:36:02.137 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:261 - =====Time 1: 0.0067119598388671875
2024-11-04 09:36:02.142 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:265 - ===Time 11: 0.02735447883605957
2024-11-04 09:36:02.145 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:278 - =====Time 2: 0.030777692794799805
2024-11-04 09:36:02.149 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:296 - =====Time all check instance ds: 0.04653596878051758
2024-11-04 09:36:02.152 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time sort instance: 4.76837158203125e-05
2024-11-04 09:36:02.156 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}]
2024-11-04 09:36:02.160 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:464 - ====Time check instance ds: 0.05839109420776367
2024-11-04 09:36:02.164 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:471 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}
2024-11-04 09:36:02.172 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:65 -  Merge config OK
2024-11-04 09:36:02.174 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:477 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/7cdca8d1595b47a5bf718b8b7bfe6092', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-04 09:36:02.178 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:139 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': 'string', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/7cdca8d1595b47a5bf718b8b7bfe6092', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-04 09:36:02.181 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:141 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': 'string', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/7cdca8d1595b47a5bf718b8b7bfe6092', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-04 09:36:07.191 | ERROR    | app.modules.camera_management.deepstream.deepstream:insert_source:154 - Request timeout
2024-11-04 09:36:07.283 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:87 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/7cdca8d1595b47a5bf718b8b7bfe6092
2024-11-04 09:36:07.286 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:109 - Add Fail
2024-11-04 10:05:49.007 | INFO     | app.modules.camera_management.routers.router:remove:72 - Client IP: 172.23.0.1
2024-11-04 10:05:49.049 | INFO     | app.modules.camera_management.routers.router:remove:73 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 10:05:49.110 | ERROR    | app.modules.camera_management.services.services:delete_camera:533 - Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 525, in delete_camera
    check, detail = self.delete_cam_plant_heatmap(cam_id)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 81, in delete_cam_plant_heatmap
    check_cam = PlantHeatmapModel.find_one_plant_heatmap({"cam_id": cam_id})
  File "/workspace/refactor/vss_controller/app/modules/camera_management/models/models.py", line 73, in find_one_plant_heatmap
    self._collection_name,
AttributeError: type object 'PlantHeatmapModel' has no attribute '_collection_name'

2024-11-04 10:19:41.289 | INFO     | app.modules.camera_management.routers.router:remove:72 - Client IP: 172.23.0.1
2024-11-04 10:19:41.289 | INFO     | app.modules.camera_management.routers.router:remove:73 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 10:19:41.318 | INFO     | app.modules.camera_management.services.services:delete_camera:548 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 540, in delete_camera
    status_code = self.delete_cam_pipeline(
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 440, in delete_cam_pipeline
    cam_info = check_cam_delete(si_id, user_id, cam_id)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
TypeError: check_cam_delete() missing 1 required positional argument: 'cam_id'

2024-11-04 10:22:14.015 | INFO     | app.modules.camera_management.routers.router:remove:72 - Client IP: 172.23.0.1
2024-11-04 10:22:14.015 | INFO     | app.modules.camera_management.routers.router:remove:73 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 10:25:14.476 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 10:25:14.480 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 10:25:14.484 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 10:25:14.488 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 10:25:14.502 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-04 10:25:14.505 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-04 10:27:34.393 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-04 10:27:34.395 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-04 10:27:34.399 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-04 10:27:34.405 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-04 10:27:34.411 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-04 10:27:34.418 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-04 10:27:35.513 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.0915460586547852
2024-11-04 10:27:35.517 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/2929c059cea745bda77f21079865329d', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-04 10:27:35.533 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: human_intrusion
2024-11-04 10:27:35.536 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-04 10:27:35.540 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:188 - ['deepstream-0.vss:9089']
2024-11-04 10:27:35.543 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:210 - ===Time get instance list: 0.0077610015869140625
2024-11-04 10:27:35.546 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - instance_list: ['deepstream-0.vss:9089']
2024-11-04 10:27:35.561 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:245 - ===Time get number camera: 0.00825047492980957
2024-11-04 10:27:35.563 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get all config: 0.0027048587799072266
2024-11-04 10:27:35.567 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': True}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/7cdca8d1595b47a5bf718b8b7bfe6092', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'string', 'source_id': 'string', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/015b7b54cd3c4ca39f5330b0c8b866fd', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'lines': [{'anchor': [100, 100], 'name': 'line1', 'value': [50, 50, 800, 50]}], 'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 0, 1919, 0, 0, 1079, 1919, 1079, 0, 0]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIyIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAwLCAxOTE5LCAwLCAwLCAxMDc5LCAxOTE5LCAxMDc5XSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbeyJuYW1lIjogImxpbmUxIiwgInZhbHVlIjogWzUwLCA1MCwgODAwLCA1MCwgMTAwLCAxMDBdLCAibGV2ZWwiOiAwfV0sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'bangpc', 'source_id': '2', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/fa413ffc93d945529da2842da3a44912', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAxMDgwLCAxOTIwLCAxMDgwLCAxOTIwLCAwLCAwLCAwXSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbXSwgInRpbWVfaW50ZXJ2YWwiOiAxMC4wLCAib3ZlcmxhcF90aHJlc2hvbGQiOiAwLjUsICJtYXJnaW4iOiAxMC4wLCAidGltZV90aHJlc2hvbGQiOiA2MC4wfX0=', 'si_id': 'bangpc', 'source_id': '1', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/23e94766366a4944bc0602b7987695a8', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'lines': [{'anchor': [100, 100], 'name': 'line1', 'value': [50, 50, 800, 50]}], 'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 0, 1919, 0, 0, 1079, 1919, 1079, 0, 0]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIzIiwgImxvY2F0aW9uIjogIkxMUSIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4xODM6ODU1NC9oaV9jb3VudGluZyIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogZmFsc2UsICJ2aWRlb19ldmVudCI6IGZhbHNlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogbnVsbCwgImF0dHJpYnV0ZSI6IG51bGwsICJsYW5kbWFyayI6IG51bGwsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW3sibmFtZSI6ICJ6b25lMSIsICJ2YWx1ZSI6IFswLCAwLCAxOTE5LCAwLCAwLCAxMDc5LCAxOTE5LCAxMDc5XSwgImxldmVsIjogMH1dLCAibGluZXMiOiBbeyJuYW1lIjogImxpbmUxIiwgInZhbHVlIjogWzUwLCA1MCwgODAwLCA1MCwgMTAwLCAxMDBdLCAibGV2ZWwiOiAwfV0sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'bangpc', 'source_id': '3', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': False, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a9c9977dcf8c4735a4e8bbb34845a5eb', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'group1', 'hi_config': {'zones': [{'duration': 0.0, 'level': 0, 'margin': 10.0, 'name': 'zone1', 'overlap_threshold': 0.5, 'time_interval': 10.0, 'value': [0, 1080, 1920, 1080, 1920, 0, 0, 0, 0, 1080]}]}, 'location': 'LLQ', 'message': 'eyJzaSI6IHsic2lfaWQiOiAiYmFuZ3BjIiwgInNpX25hbWUiOiAiYmFuZ3BjIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJiYW5ncGMiLCAidXNlcl9uYW1lIjogImJhbmdwYyIsICJ1c2VyX2dyb3VwIjogImdyb3VwMSJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMCIsICJsb2NhdGlvbiI6ICJMTFEiLCAic291cmNlIjogInJ0c3A6Ly8xNzIuMTkuMjAuMTgzOjg1NTQvaGlfY291bnRpbmciLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IGZhbHNlLCAidmlkZW9fZXZlbnQiOiBmYWxzZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6IG51bGwsICJhdHRyaWJ1dGUiOiBudWxsLCAibGFuZG1hcmsiOiBudWxsLCAibGltaXRhdGlvbiI6IDAsICJtaW5fc2l6ZSI6IDIwLCAibWF4X3NpemUiOiA1MDAsICJubXNfdGhyZXNob2xkIjogMC41LCAiY29uZl90aHJlc2hvbGQiOiAwLjV9LCAiaGlfY29uZmlnIjogeyJ6b25lcyI6IFt7Im5hbWUiOiAiem9uZTEiLCAidmFsdWUiOiBbMCwgMTA4MCwgMTkyMCwgMTA4MCwgMTkyMCwgMCwgMCwgMF0sICJsZXZlbCI6IDB9XSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMTAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'bangpc', 'source_id': '10', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.183:8554/hi_counting', 'user_id': 'bangpc', 'video_event': False}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-04 10:27:35.570 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:258 - config: human_intrusion
2024-11-04 10:27:35.575 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:261 - =====Time 1: 0.004801273345947266
2024-11-04 10:27:35.577 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:265 - ===Time 11: 0.02696061134338379
2024-11-04 10:27:35.580 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:278 - =====Time 2: 0.029789447784423828
2024-11-04 10:27:35.584 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:296 - =====Time all check instance ds: 0.04843902587890625
2024-11-04 10:27:35.587 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time sort instance: 4.76837158203125e-06
2024-11-04 10:27:35.590 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 5, 'solution': 'human_intrusion'}]
2024-11-04 10:27:35.593 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:464 - ====Time check instance ds: 0.05803823471069336
2024-11-04 10:27:35.597 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:471 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 5, 'solution': 'human_intrusion'}
2024-11-04 10:27:35.604 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:65 -  Merge config OK
2024-11-04 10:27:35.607 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:477 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/2929c059cea745bda77f21079865329d', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-04 10:27:35.610 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:139 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': 'string', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/2929c059cea745bda77f21079865329d', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-04 10:27:35.613 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:141 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': 'string', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/2929c059cea745bda77f21079865329d', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-04 10:27:35.621 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:147 - res insert source: <Response [653]>, {
    "message": "Source id existed"
}
2024-11-04 10:27:35.624 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/2929c059cea745bda77f21079865329d
2024-11-04 10:27:35.627 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 04:16:11.436 | INFO     | app.modules.camera_management.routers.router:remove:72 - Client IP: 172.23.0.1
2024-11-05 04:16:11.440 | INFO     | app.modules.camera_management.routers.router:remove:73 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 04:16:11.458 | INFO     | app.modules.camera_management.services.services:delete_cam_pipeline:449 - instance_id: deepstream-0.vss:9089
2024-11-05 04:16:11.487 | INFO     | app.modules.camera_management.deepstream.deepstream:delete_cam:665 - 200
2024-11-05 04:16:11.524 | INFO     | app.modules.camera_management.services.services:delete_camera:548 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 540, in delete_camera
    status_code = self.delete_cam_pipeline(
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 451, in delete_cam_pipeline
    res = self.delete_cam(si_id, user_id, cam_id)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 141, in delete_cam
    check_cam = CameraModel.find_one({
TypeError: MongoDB.find_one() missing 2 required positional arguments: 'col_name' and 'query'

2024-11-05 04:27:36.762 | INFO     | app.modules.camera_management.routers.router:remove:72 - Client IP: 172.23.0.1
2024-11-05 04:27:36.765 | INFO     | app.modules.camera_management.routers.router:remove:73 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 04:27:36.779 | INFO     | app.modules.camera_management.services.services:delete_cam_pipeline:449 - instance_id: deepstream-0.vss:9089
2024-11-05 04:27:36.784 | INFO     | app.modules.camera_management.deepstream.deepstream:delete_cam:665 - 404
2024-11-05 04:28:56.041 | INFO     | app.modules.camera_management.routers.router:remove:72 - Client IP: 172.23.0.1
2024-11-05 04:28:56.041 | INFO     | app.modules.camera_management.routers.router:remove:73 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 04:28:56.057 | INFO     | app.modules.camera_management.services.services:delete_cam_pipeline:449 - instance_id: deepstream-0.vss:9089
2024-11-05 04:28:56.064 | INFO     | app.modules.camera_management.deepstream.deepstream:delete_cam:665 - {
    "message": "source_id is not found."
}
2024-11-05 07:25:46.714 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:25:46.717 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:25:46.722 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:25:46.725 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "FACE_RECOGNITION", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:25:46.739 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:25:46.742 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:25:47.835 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.0886123180389404
2024-11-05 07:25:47.839 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/ef24ba12fb4c494e9d7bbcec028ae740', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiRkFDRV9SRUNPR05JVElPTiIsICJjYW1faW5mbyI6IHsiY2FtX2lkIjogInN0cmluZyIsICJsb2NhdGlvbiI6ICJzdHJpbmciLCAic291cmNlIjogInJ0c3A6Ly8xNzIuMTkuMjAuMjAwOjMxNTU0L252c3RyZWFtL2hvbWUvdnN0L3ZzdF9yZWxlYXNlL3N0cmVhbWVyX3ZpZGVvcy9GUl8xNDEubXA0IiwgImFjY2Vzc0tleSI6ICJzdHJpbmciLCAiZW5kcG9pbnQiOiAic3RyaW5nIiwgImFpX3N0cmVhbWluZ19vdXQiOiB0cnVlLCAidmlkZW9fZXZlbnQiOiB0cnVlfSwgImFpX2NvbmZpZyI6IHsiZGlzdF90eXBlIjogInN0cmluZyIsICJhdHRyaWJ1dGUiOiBbInN0cmluZyJdLCAibGFuZG1hcmsiOiB0cnVlLCAibGltaXRhdGlvbiI6IDAsICJtaW5fc2l6ZSI6IDIwLCAibWF4X3NpemUiOiA1MDAsICJubXNfdGhyZXNob2xkIjogMC41LCAiY29uZl90aHJlc2hvbGQiOiAwLjV9LCAiaGlfY29uZmlnIjogeyJ6b25lcyI6IFtdLCAibGluZXMiOiBbXSwgInRpbWVfaW50ZXJ2YWwiOiAzMC4wLCAib3ZlcmxhcF90aHJlc2hvbGQiOiAwLjUsICJtYXJnaW4iOiAxMC4wLCAidGltZV90aHJlc2hvbGQiOiA2MC4wfX0=', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=False, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:25:47.852 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: face_detection
2024-11-05 07:25:47.855 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:25:47.858 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:188 - ['deepstream-0.vss:9089']
2024-11-05 07:25:47.861 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:210 - ===Time get instance list: 0.006880283355712891
2024-11-05 07:25:47.864 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:25:47.874 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:245 - ===Time get number camera: 0.00515437126159668
2024-11-05 07:25:47.877 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get all config: 0.0017359256744384766
2024-11-05 07:25:47.880 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': True}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': None, 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:25:47.884 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:258 - config: human_intrusion
2024-11-05 07:25:47.887 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:261 - =====Time 1: 0.0034852027893066406
2024-11-05 07:25:47.890 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:265 - ===Time 11: 0.022683382034301758
2024-11-05 07:25:47.893 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:278 - =====Time 2: 0.025648832321166992
2024-11-05 07:25:47.896 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:296 - =====Time all check instance ds: 0.04147982597351074
2024-11-05 07:25:47.898 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time sort instance: 4.76837158203125e-06
2024-11-05 07:25:47.901 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 10, 'solution': 'human_intrusion'}]
2024-11-05 07:25:47.905 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:464 - ====Time check instance ds: 0.05131077766418457
2024-11-05 07:25:47.910 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:471 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 10, 'solution': 'human_intrusion'}
2024-11-05 07:25:47.912 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:488 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 10, 'solution': 'human_intrusion'}
2024-11-05 07:25:47.916 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/ef24ba12fb4c494e9d7bbcec028ae740
2024-11-05 07:25:47.919 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 07:26:30.628 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:26:30.631 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:26:30.634 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:26:30.638 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "string", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:26:30.642 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:26:30.644 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:26:31.732 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.084561824798584
2024-11-05 07:26:31.736 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/37584e1f0c2845829e00f378206b4f2b', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:26:31.751 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: human_intrusion
2024-11-05 07:26:31.754 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:26:31.757 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:188 - ['deepstream-0.vss:9089']
2024-11-05 07:26:31.761 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:210 - ===Time get instance list: 0.0072214603424072266
2024-11-05 07:26:31.764 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:26:31.771 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:245 - ===Time get number camera: 0.0023164749145507812
2024-11-05 07:26:31.773 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get all config: 0.001708984375
2024-11-05 07:26:31.776 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': True}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': None, 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:26:31.779 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:258 - config: human_intrusion
2024-11-05 07:26:31.783 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:261 - =====Time 1: 0.003299713134765625
2024-11-05 07:26:31.786 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:265 - ===Time 11: 0.019044160842895508
2024-11-05 07:26:31.789 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:278 - =====Time 2: 0.022347688674926758
2024-11-05 07:26:31.793 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:296 - =====Time all check instance ds: 0.03922772407531738
2024-11-05 07:26:31.796 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time sort instance: 8.821487426757812e-06
2024-11-05 07:26:31.798 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 10, 'solution': 'human_intrusion'}]
2024-11-05 07:26:31.802 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:464 - ====Time check instance ds: 0.04861259460449219
2024-11-05 07:26:31.805 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:471 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 10, 'solution': 'human_intrusion'}
2024-11-05 07:26:31.812 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:65 -  Merge config OK
2024-11-05 07:26:31.814 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:477 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='string', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/37584e1f0c2845829e00f378206b4f2b', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 07:26:31.818 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:139 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': 'string', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/37584e1f0c2845829e00f378206b4f2b', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 07:26:31.821 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:141 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': 'string', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/37584e1f0c2845829e00f378206b4f2b', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 07:26:36.831 | ERROR    | app.modules.camera_management.deepstream.deepstream:insert_source:154 - Request timeout
2024-11-05 07:26:36.861 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/37584e1f0c2845829e00f378206b4f2b
2024-11-05 07:26:36.863 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 07:27:34.436 | INFO     | app.modules.camera_management.routers.router:remove:72 - Client IP: 172.23.0.1
2024-11-05 07:27:34.439 | INFO     | app.modules.camera_management.routers.router:remove:73 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:30:09.345 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:30:09.353 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:30:09.360 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:30:09.365 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "111", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:30:09.379 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:30:09.382 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:30:10.480 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.093226432800293
2024-11-05 07:30:10.487 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/a0171d4c8b3141a08edb9c2f0f42bf86', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:30:10.509 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: human_intrusion
2024-11-05 07:30:10.512 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:30:10.514 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:188 - ['deepstream-0.vss:9089']
2024-11-05 07:30:10.519 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:210 - ===Time get instance list: 0.00790858268737793
2024-11-05 07:30:10.522 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:30:10.553 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:245 - ===Time get number camera: 0.025000810623168945
2024-11-05 07:30:10.557 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get all config: 0.001855611801147461
2024-11-05 07:30:10.563 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': True}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/37584e1f0c2845829e00f378206b4f2b', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'string', 'source_id': 'string', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:30:10.567 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:258 - config: human_intrusion
2024-11-05 07:30:10.575 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:261 - =====Time 1: 0.008198738098144531
2024-11-05 07:30:10.578 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:265 - ===Time 11: 0.05188584327697754
2024-11-05 07:30:10.584 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:278 - =====Time 2: 0.05712771415710449
2024-11-05 07:30:10.588 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:296 - =====Time all check instance ds: 0.07686471939086914
2024-11-05 07:30:10.593 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time sort instance: 6.4373016357421875e-06
2024-11-05 07:30:10.596 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 9, 'solution': 'human_intrusion'}]
2024-11-05 07:30:10.599 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:464 - ====Time check instance ds: 0.08872032165527344
2024-11-05 07:30:10.605 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:471 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 9, 'solution': 'human_intrusion'}
2024-11-05 07:30:10.617 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:65 -  Merge config OK
2024-11-05 07:30:10.833 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:477 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/a0171d4c8b3141a08edb9c2f0f42bf86', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 07:30:10.839 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:139 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a0171d4c8b3141a08edb9c2f0f42bf86', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 07:30:10.844 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:141 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a0171d4c8b3141a08edb9c2f0f42bf86', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 07:30:15.858 | ERROR    | app.modules.camera_management.deepstream.deepstream:insert_source:154 - Request timeout
2024-11-05 07:30:15.936 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/a0171d4c8b3141a08edb9c2f0f42bf86
2024-11-05 07:30:15.942 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 07:39:14.639 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:39:14.652 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:39:14.656 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:39:14.661 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1113", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:39:14.829 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:39:14.836 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:39:15.965 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.1250410079956055
2024-11-05 07:39:15.969 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1113', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/b8a3bc9951d44ee1a36d9df621ceed39', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:39:15.982 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: human_intrusion
2024-11-05 07:39:15.986 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:39:15.988 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:188 - ['deepstream-0.vss:9089']
2024-11-05 07:39:15.991 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:210 - ===Time get instance list: 0.006456136703491211
2024-11-05 07:39:15.993 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:39:16.005 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:245 - ===Time get number camera: 0.0053179264068603516
2024-11-05 07:39:16.007 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get all config: 0.0027866363525390625
2024-11-05 07:39:16.012 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': True}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a0171d4c8b3141a08edb9c2f0f42bf86', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'string', 'source_id': '111', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/37584e1f0c2845829e00f378206b4f2b', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICJzdHJpbmciLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'string', 'source_id': 'string', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:39:16.015 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:258 - config: human_intrusion
2024-11-05 07:39:16.018 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:261 - =====Time 1: 0.0036928653717041016
2024-11-05 07:39:16.021 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:265 - ===Time 11: 0.024634838104248047
2024-11-05 07:39:16.024 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:278 - =====Time 2: 0.0278017520904541
2024-11-05 07:39:16.027 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:296 - =====Time all check instance ds: 0.043024301528930664
2024-11-05 07:39:16.030 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time sort instance: 7.3909759521484375e-06
2024-11-05 07:39:16.033 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 8, 'solution': 'human_intrusion'}]
2024-11-05 07:39:16.036 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:464 - ====Time check instance ds: 0.05216336250305176
2024-11-05 07:39:16.039 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:471 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 8, 'solution': 'human_intrusion'}
2024-11-05 07:39:16.049 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:65 -  Merge config OK
2024-11-05 07:39:16.052 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:477 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1113', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/b8a3bc9951d44ee1a36d9df621ceed39', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 07:39:16.056 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:139 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1113', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/b8a3bc9951d44ee1a36d9df621ceed39', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 07:39:16.060 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:141 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1113', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/b8a3bc9951d44ee1a36d9df621ceed39', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 07:39:21.069 | ERROR    | app.modules.camera_management.deepstream.deepstream:insert_source:154 - Request timeout
2024-11-05 07:39:21.346 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/b8a3bc9951d44ee1a36d9df621ceed39
2024-11-05 07:39:21.496 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 07:44:15.200 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:44:15.204 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:44:15.208 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:44:15.214 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1113", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:44:15.252 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:44:15.255 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:44:16.403 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.1433463096618652
2024-11-05 07:44:16.407 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1113', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:44:16.425 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: human_intrusion
2024-11-05 07:44:16.430 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:44:16.433 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:188 - ['deepstream-0.vss:9089']
2024-11-05 07:44:16.437 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:210 - ===Time get instance list: 0.008232593536376953
2024-11-05 07:44:16.440 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:44:16.466 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:245 - ===Time get number camera: 0.021889448165893555
2024-11-05 07:44:16.470 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get all config: 0.001634836196899414
2024-11-05 07:44:16.474 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': True}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': None, 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:44:16.477 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:258 - config: human_intrusion
2024-11-05 07:44:16.481 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:261 - =====Time 1: 0.004251003265380859
2024-11-05 07:44:16.485 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:265 - ===Time 11: 0.04230999946594238
2024-11-05 07:44:16.488 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:278 - =====Time 2: 0.045317888259887695
2024-11-05 07:44:16.492 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:296 - =====Time all check instance ds: 0.06302547454833984
2024-11-05 07:44:16.495 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time sort instance: 1.1682510375976562e-05
2024-11-05 07:44:16.498 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 10, 'solution': 'human_intrusion'}]
2024-11-05 07:44:16.501 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:464 - ====Time check instance ds: 0.07302546501159668
2024-11-05 07:44:16.504 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:471 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 10, 'solution': 'human_intrusion'}
2024-11-05 07:44:16.514 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:65 -  Merge config OK
2024-11-05 07:44:16.518 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:477 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1113', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 07:44:16.523 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:139 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1113', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 07:44:16.527 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:141 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1113', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 07:44:21.540 | ERROR    | app.modules.camera_management.deepstream.deepstream:insert_source:154 - Request timeout
2024-11-05 07:44:21.625 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365
2024-11-05 07:44:21.627 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 07:49:11.197 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:49:11.198 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:49:11.201 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:49:11.204 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1114", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:49:11.218 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:49:11.221 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:49:12.309 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Time check link rtsp exist: 1.0840835571289062
2024-11-05 07:49:12.314 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:450 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1114', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE0IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:49:12.328 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:460 - request_solution: human_intrusion
2024-11-05 07:49:12.332 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:186 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:49:12.334 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:188 - ['deepstream-0.vss:9089']
2024-11-05 07:49:12.337 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:210 - ===Time get instance list: 0.006173610687255859
2024-11-05 07:49:12.340 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:49:12.350 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:245 - ===Time get number camera: 0.0050754547119140625
2024-11-05 07:49:12.352 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get all config: 0.0019865036010742188
2024-11-05 07:49:12.356 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1113', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:49:12.359 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:258 - config: human_intrusion
2024-11-05 07:49:12.363 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:261 - =====Time 1: 0.0039942264556884766
2024-11-05 07:49:12.366 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:265 - ===Time 11: 0.02262401580810547
2024-11-05 07:49:12.369 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:278 - =====Time 2: 0.025522232055664062
2024-11-05 07:49:12.372 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:296 - =====Time all check instance ds: 0.040801048278808594
2024-11-05 07:49:12.374 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time sort instance: 7.62939453125e-06
2024-11-05 07:49:12.377 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 9, 'solution': 'human_intrusion'}]
2024-11-05 07:49:12.380 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:464 - ====Time check instance ds: 0.04957246780395508
2024-11-05 07:49:12.383 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:471 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 9, 'solution': 'human_intrusion'}
2024-11-05 07:49:12.391 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:65 -  Merge config OK
2024-11-05 07:49:12.393 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:477 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1114', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE0IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 07:49:12.396 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:139 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1114', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE0IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 07:49:12.400 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:141 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1114', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE0IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 07:49:17.409 | ERROR    | app.modules.camera_management.deepstream.deepstream:insert_source:154 - Request timeout
2024-11-05 07:49:17.436 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a
2024-11-05 07:49:17.441 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 07:50:54.486 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:50:54.487 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:50:54.493 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:50:54.497 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1115", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:50:54.511 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:50:54.513 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:50:55.601 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.0798008441925049
2024-11-05 07:50:55.605 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1115', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/857d7a243cd746a68a80c5d4db68876d', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:50:55.614 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 07:50:55.617 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:50:55.620 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 07:50:55.623 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.0065805912017822266
2024-11-05 07:50:55.626 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:50:55.634 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.003463268280029297
2024-11-05 07:50:55.636 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0018320083618164062
2024-11-05 07:50:55.641 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE0IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1114', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1113', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:50:55.644 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 07:50:55.648 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.0037679672241210938
2024-11-05 07:50:55.651 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.0217592716217041
2024-11-05 07:50:55.654 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.02461528778076172
2024-11-05 07:50:55.657 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.04050278663635254
2024-11-05 07:50:55.660 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 7.867813110351562e-06
2024-11-05 07:50:55.664 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 8, 'solution': 'human_intrusion'}]
2024-11-05 07:50:55.667 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.051396846771240234
2024-11-05 07:50:55.670 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 8, 'solution': 'human_intrusion'}
2024-11-05 07:50:55.678 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 07:50:55.680 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1115', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/857d7a243cd746a68a80c5d4db68876d', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 07:50:55.683 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1115', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/857d7a243cd746a68a80c5d4db68876d', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 07:50:55.686 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1115', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/857d7a243cd746a68a80c5d4db68876d', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 07:51:00.695 | ERROR    | app.modules.camera_management.deepstream.deepstream:insert_source:155 - Request timeout
2024-11-05 07:51:00.710 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/857d7a243cd746a68a80c5d4db68876d
2024-11-05 07:51:00.713 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 07:52:08.931 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:52:08.936 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:52:08.942 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:52:08.949 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1115", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:52:08.968 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:52:08.974 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:52:10.087 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.1064963340759277
2024-11-05 07:52:10.097 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1115', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/fcc1551d920a4584bb6cb04fe7c80eea', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:52:10.143 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 07:52:10.151 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:52:10.159 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 07:52:10.168 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.018352508544921875
2024-11-05 07:52:10.178 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:52:10.191 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.003252267837524414
2024-11-05 07:52:10.210 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0025703907012939453
2024-11-05 07:52:10.227 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/857d7a243cd746a68a80c5d4db68876d', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1115', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE0IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1114', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1113', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:52:10.237 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 07:52:10.277 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.03998064994812012
2024-11-05 07:52:10.287 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.10224080085754395
2024-11-05 07:52:10.303 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.1182715892791748
2024-11-05 07:52:10.314 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.16431641578674316
2024-11-05 07:52:10.391 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 5.0067901611328125e-06
2024-11-05 07:52:10.402 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 7, 'solution': 'human_intrusion'}]
2024-11-05 07:52:10.413 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.26345014572143555
2024-11-05 07:52:10.581 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 7, 'solution': 'human_intrusion'}
2024-11-05 07:52:10.740 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 07:52:10.913 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1115', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/fcc1551d920a4584bb6cb04fe7c80eea', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 07:52:10.924 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1115', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/fcc1551d920a4584bb6cb04fe7c80eea', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 07:52:11.189 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1115', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/fcc1551d920a4584bb6cb04fe7c80eea', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 07:52:11.246 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [653]>, {
    "message": "Source id existed"
}
2024-11-05 07:52:11.263 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/fcc1551d920a4584bb6cb04fe7c80eea
2024-11-05 07:52:11.269 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 07:52:25.230 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:52:25.236 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:52:25.242 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:52:25.249 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1116", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:52:25.257 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:52:25.262 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:52:26.396 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.127009630203247
2024-11-05 07:52:26.405 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1116', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/86a13614e0704ce2ae54fb6db411aa7c', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE2IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:52:26.433 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 07:52:26.443 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:52:26.452 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 07:52:26.462 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.0212709903717041
2024-11-05 07:52:26.472 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:52:26.491 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.002164602279663086
2024-11-05 07:52:26.500 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0022704601287841797
2024-11-05 07:52:26.509 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/857d7a243cd746a68a80c5d4db68876d', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1115', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE0IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1114', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1113', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:52:26.518 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 07:52:26.531 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.013273239135742188
2024-11-05 07:52:26.540 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.05306696891784668
2024-11-05 07:52:26.551 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.06462979316711426
2024-11-05 07:52:26.578 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.13732552528381348
2024-11-05 07:52:26.587 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 4.291534423828125e-06
2024-11-05 07:52:26.595 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 7, 'solution': 'human_intrusion'}]
2024-11-05 07:52:26.609 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.16823625564575195
2024-11-05 07:52:26.618 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 7, 'solution': 'human_intrusion'}
2024-11-05 07:52:26.646 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 07:52:26.657 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1116', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/86a13614e0704ce2ae54fb6db411aa7c', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE2IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 07:52:26.670 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1116', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/86a13614e0704ce2ae54fb6db411aa7c', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE2IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 07:52:26.689 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1116', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/86a13614e0704ce2ae54fb6db411aa7c', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE2IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 07:52:31.707 | ERROR    | app.modules.camera_management.deepstream.deepstream:insert_source:155 - Request timeout
2024-11-05 07:52:31.778 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/86a13614e0704ce2ae54fb6db411aa7c
2024-11-05 07:52:31.790 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 07:55:50.491 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 07:55:50.492 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 07:55:50.495 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 07:55:50.499 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1117", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 07:55:50.513 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 07:55:50.515 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 07:55:51.638 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.1186368465423584
2024-11-05 07:55:51.642 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1117', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/467150dd1e304a9b8d93a5cc9ad5d92c', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE3IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 07:55:51.651 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 07:55:51.655 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 07:55:51.657 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 07:55:51.660 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.006391286849975586
2024-11-05 07:55:51.663 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 07:55:51.672 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.0032405853271484375
2024-11-05 07:55:51.674 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0022711753845214844
2024-11-05 07:55:51.678 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': False, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/86a13614e0704ce2ae54fb6db411aa7c', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE2IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1116', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/857d7a243cd746a68a80c5d4db68876d', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1115', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE0IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1114', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1113', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 07:55:51.681 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 07:55:51.686 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.005507230758666992
2024-11-05 07:55:51.689 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.022394180297851562
2024-11-05 07:55:51.692 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.025368452072143555
2024-11-05 07:55:51.695 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.04145312309265137
2024-11-05 07:55:51.698 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 1.0013580322265625e-05
2024-11-05 07:55:51.701 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}]
2024-11-05 07:55:51.704 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.05053257942199707
2024-11-05 07:55:51.707 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}
2024-11-05 07:55:51.715 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 07:55:51.718 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1117', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/467150dd1e304a9b8d93a5cc9ad5d92c', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE3IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 07:55:51.721 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1117', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/467150dd1e304a9b8d93a5cc9ad5d92c', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE3IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 07:55:51.724 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1117', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/467150dd1e304a9b8d93a5cc9ad5d92c', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE3IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 07:56:11.749 | ERROR    | app.modules.camera_management.deepstream.deepstream:insert_source:155 - Request timeout
2024-11-05 07:56:11.772 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/467150dd1e304a9b8d93a5cc9ad5d92c
2024-11-05 07:56:11.774 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 08:08:40.881 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 08:08:40.886 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 08:08:40.891 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 08:08:40.896 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1118", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 08:08:40.910 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 08:08:40.914 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 08:08:42.424 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.5041298866271973
2024-11-05 08:08:42.428 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1118', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/3fa5509187364eef927637760d5a1f7b', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 08:08:42.441 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 08:08:42.445 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 08:08:42.448 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 08:08:42.451 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.007002115249633789
2024-11-05 08:08:42.454 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 08:08:42.474 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.011840581893920898
2024-11-05 08:08:42.477 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0034852027893066406
2024-11-05 08:08:42.484 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': True, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': '152a66eb7aa8de8294d284ee61e1a958', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'license_plate_ft', 'enable': True, 'host': '172.19.20.177', 'password': '123456a@', 'port': 6379, 'queue_name': 'lp_ft'}, 'type': 'Redis'}}, 'drop_frame_interval': 20, 'enable': True, 'endpoint': 'rtsp://172.19.20.200:8555/cam0', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.5}, 'frame_interval': {'enable': False, 'interval': 15.0}, 'goodness_score': {'enable': True, 'threshold': 0.6000000238418579}}, 'gpu_id': 0, 'group_id': 'ST', 'hi_config': {'zones': [{'duration': 0.0, 'level': 0, 'margin': 0.0, 'name': 'lot3', 'overlap_threshold': 0.30000001192092896, 'time_interval': 10.0, 'value': [1211, 220, 1918, 220, 1918, 897, 1211, 897, 1211, 220]}, {'duration': 0.0, 'level': 0, 'margin': 0.0, 'name': 'lot1', 'overlap_threshold': 0.30000001192092896, 'time_interval': 10.0, 'value': [42, 219, 740, 219, 740, 882, 42, 882, 42, 219]}, {'duration': 0.0, 'level': 0, 'margin': 0.0, 'name': 'lot2', 'overlap_threshold': 0.30000001192092896, 'time_interval': 10.0, 'value': [606, 220, 1319, 220, 1319, 932, 606, 932, 606, 220]}]}, 'location': '', 'message': '', 'si_id': 'ST', 'source_id': '8888', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'ST', 'video_event': False}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/86a13614e0704ce2ae54fb6db411aa7c', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE2IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1116', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/467150dd1e304a9b8d93a5cc9ad5d92c', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE3IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1117', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/857d7a243cd746a68a80c5d4db68876d', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE1IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1115', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/b5456616e23d4c2f9f94fb3e4b07555a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE0IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1114', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/dd7d8ceeb32340a3ae85c94146ed6365', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTEzIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1113', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 08:08:42.489 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 08:08:42.506 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.0171201229095459
2024-11-05 08:08:42.511 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.051523447036743164
2024-11-05 08:08:42.514 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.054529666900634766
2024-11-05 08:08:42.517 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.07278609275817871
2024-11-05 08:08:42.521 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 1.5020370483398438e-05
2024-11-05 08:08:42.524 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 4, 'solution': 'human_intrusion'}]
2024-11-05 08:08:42.528 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.08413219451904297
2024-11-05 08:08:42.531 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 4, 'solution': 'human_intrusion'}
2024-11-05 08:08:42.539 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 08:08:42.545 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1118', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/3fa5509187364eef927637760d5a1f7b', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 08:08:42.549 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1118', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/3fa5509187364eef927637760d5a1f7b', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 08:08:42.552 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1118', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/3fa5509187364eef927637760d5a1f7b', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 08:08:42.587 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [200]>, {"message":"Insert Source Successfully"}
2024-11-05 08:08:42.590 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:482 - Insert source success
2024-11-05 08:08:42.594 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:483 - Time insert cam: 0.046469688415527344
2024-11-05 08:08:42.600 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1118', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/3fa5509187364eef927637760d5a1f7b', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))], message: deepstream-0.vss:9089, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/3fa5509187364eef927637760d5a1f7b
2024-11-05 08:08:42.652 | INFO     | app.modules.camera_management.services.services:add_camera:508 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 497, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 109, in add_cam_pipeline
    if add_cam(self.logger, streaming):
NameError: name 'add_cam' is not defined

2024-11-05 08:43:02.600 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 08:43:02.603 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 08:43:02.607 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 08:43:02.610 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1119", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 08:43:02.627 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 08:43:02.629 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 08:43:03.951 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.317991018295288
2024-11-05 08:43:03.956 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1119', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/a54d44bb071b488fab8e72bab25df996', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 08:43:03.968 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 08:43:03.971 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 08:43:03.976 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 08:43:03.979 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.009242773056030273
2024-11-05 08:43:03.984 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 08:43:03.993 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.0050084590911865234
2024-11-05 08:43:03.995 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0011816024780273438
2024-11-05 08:43:03.998 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'message': 'pipeline has not created'}
2024-11-05 08:43:04.001 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:255 - pipeline has not created
2024-11-05 08:43:04.004 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.003170013427734375
2024-11-05 08:43:04.007 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.020717382431030273
2024-11-05 08:43:04.010 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:286 - =====Time 3: 0.023693084716796875
2024-11-05 08:43:04.014 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.0433955192565918
2024-11-05 08:43:04.017 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 1.7404556274414062e-05
2024-11-05 08:43:04.019 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 40, 'solution': 'notdefine'}]
2024-11-05 08:43:04.024 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.05363655090332031
2024-11-05 08:43:04.026 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 40, 'solution': 'notdefine'}
2024-11-05 08:43:04.029 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:489 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 40, 'solution': 'notdefine'}
2024-11-05 08:43:04.037 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 08:43:04.039 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:495 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1119', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/a54d44bb071b488fab8e72bab25df996', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 08:43:04.043 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1119', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a54d44bb071b488fab8e72bab25df996', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 08:43:04.045 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1119', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a54d44bb071b488fab8e72bab25df996', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 08:43:04.051 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [643]>, {
    "message": "pipeline has not created."
}
2024-11-05 08:43:04.053 | INFO     | app.modules.camera_management.deepstream.deepstream:create_pipeline:87 - instance create pipeline: {'address': 'deepstream-0.vss:9089', 'slot_available': 40, 'solution': 'notdefine'}
2024-11-05 08:43:09.523 | INFO     | app.modules.camera_management.services.services:add_camera:508 - Error: Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/urllib3/connectionpool.py", line 467, in _make_request
    six.raise_from(e, None)
  File "<string>", line 3, in raise_from
  File "/usr/local/lib/python3.10/dist-packages/urllib3/connectionpool.py", line 462, in _make_request
    httplib_response = conn.getresponse()
  File "/usr/lib/python3.10/http/client.py", line 1375, in getresponse
    response.begin()
  File "/usr/lib/python3.10/http/client.py", line 318, in begin
    version, status, reason = self._read_status()
  File "/usr/lib/python3.10/http/client.py", line 279, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
  File "/usr/lib/python3.10/socket.py", line 705, in readinto
    return self._sock.recv_into(b)
TimeoutError: timed out

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/dist-packages/requests/adapters.py", line 439, in send
    resp = conn.urlopen(
  File "/usr/local/lib/python3.10/dist-packages/urllib3/connectionpool.py", line 801, in urlopen
    retries = retries.increment(
  File "/usr/local/lib/python3.10/dist-packages/urllib3/util/retry.py", line 552, in increment
    raise six.reraise(type(error), error, _stacktrace)
  File "/usr/local/lib/python3.10/dist-packages/urllib3/packages/six.py", line 770, in reraise
    raise value
  File "/usr/local/lib/python3.10/dist-packages/urllib3/connectionpool.py", line 715, in urlopen
    httplib_response = self._make_request(
  File "/usr/local/lib/python3.10/dist-packages/urllib3/connectionpool.py", line 469, in _make_request
    self._raise_timeout(err=e, url=url, timeout_value=read_timeout)
  File "/usr/local/lib/python3.10/dist-packages/urllib3/connectionpool.py", line 358, in _raise_timeout
    raise ReadTimeoutError(
urllib3.exceptions.ReadTimeoutError: HTTPConnectionPool(host='deepstream-0.vss', port=9089): Read timed out. (read timeout=5)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 89, in create_pipeline
    res = requests.put(
  File "/usr/local/lib/python3.10/dist-packages/requests/api.py", line 134, in put
    return request('put', url, data=data, **kwargs)
  File "/usr/local/lib/python3.10/dist-packages/requests/api.py", line 61, in request
    return session.request(method=method, url=url, **kwargs)
  File "/usr/local/lib/python3.10/dist-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/usr/local/lib/python3.10/dist-packages/requests/sessions.py", line 655, in send
    r = adapter.send(request, **kwargs)
  File "/usr/local/lib/python3.10/dist-packages/requests/adapters.py", line 529, in send
    raise ReadTimeout(e, request=request)
requests.exceptions.ReadTimeout: HTTPConnectionPool(host='deepstream-0.vss', port=9089): Read timed out. (read timeout=5)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 497, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 102, in add_cam_pipeline
    info = DSClient.insert_cam(self.logger, streaming, None)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 505, in insert_cam
    if DSClient.create_pipeline(logger, new_config, instance):
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 114, in create_pipeline
    logger.error(f"{traceback.format_exec()}")
AttributeError: module 'traceback' has no attribute 'format_exec'

2024-11-05 08:46:52.112 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 08:46:52.115 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 08:46:52.120 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 08:46:52.124 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1119", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 08:46:52.139 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 08:46:52.141 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 08:46:53.231 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.0866634845733643
2024-11-05 08:46:53.236 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1119', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 08:46:53.250 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 08:46:53.254 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 08:46:53.256 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 08:46:53.260 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.0072820186614990234
2024-11-05 08:46:53.263 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 08:46:53.297 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.028832435607910156
2024-11-05 08:46:53.299 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0016779899597167969
2024-11-05 08:46:53.302 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'message': 'pipeline has not created'}
2024-11-05 08:46:53.305 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:255 - pipeline has not created
2024-11-05 08:46:53.308 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.0029120445251464844
2024-11-05 08:46:53.311 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.044991493225097656
2024-11-05 08:46:53.314 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:286 - =====Time 3: 0.048421621322631836
2024-11-05 08:46:53.318 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.06482458114624023
2024-11-05 08:46:53.321 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 9.5367431640625e-06
2024-11-05 08:46:53.323 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 40, 'solution': 'notdefine'}]
2024-11-05 08:46:53.327 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.0745549201965332
2024-11-05 08:46:53.330 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 40, 'solution': 'notdefine'}
2024-11-05 08:46:53.334 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:489 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 40, 'solution': 'notdefine'}
2024-11-05 08:46:53.342 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 08:46:53.344 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:495 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1119', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 08:46:53.348 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1119', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 08:46:53.351 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1119', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 08:46:53.355 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [643]>, {
    "message": "pipeline has not created."
}
2024-11-05 08:46:53.357 | INFO     | app.modules.camera_management.deepstream.deepstream:create_pipeline:87 - instance create pipeline: {'address': 'deepstream-0.vss:9089', 'slot_available': 40, 'solution': 'notdefine'}
2024-11-05 08:46:58.367 | ERROR    | app.modules.camera_management.deepstream.deepstream:create_pipeline:100 - Request timeout
2024-11-05 08:46:58.389 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f
2024-11-05 08:46:58.391 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 08:48:50.856 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 08:48:50.858 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 08:48:50.862 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 08:48:50.866 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1118", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 08:48:50.870 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 08:48:50.873 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 08:48:51.955 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.079237699508667
2024-11-05 08:48:51.959 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1118', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 08:48:51.973 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 08:48:51.976 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 08:48:51.978 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 08:48:51.982 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.006469011306762695
2024-11-05 08:48:51.985 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 08:48:51.992 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.0022192001342773438
2024-11-05 08:48:51.994 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0026252269744873047
2024-11-05 08:48:51.997 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': True, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1119', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 08:48:52.001 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 08:48:52.004 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.0030591487884521484
2024-11-05 08:48:52.007 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.01959061622619629
2024-11-05 08:48:52.010 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.022289276123046875
2024-11-05 08:48:52.012 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.03718256950378418
2024-11-05 08:48:52.015 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 7.867813110351562e-06
2024-11-05 08:48:52.018 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 9, 'solution': 'human_intrusion'}]
2024-11-05 08:48:52.021 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.04636573791503906
2024-11-05 08:48:52.024 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 9, 'solution': 'human_intrusion'}
2024-11-05 08:48:52.032 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 08:48:52.034 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1118', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 08:48:52.037 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1118', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 08:48:52.040 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1118', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 08:48:52.063 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [200]>, {"message":"Insert Source Successfully"}
2024-11-05 08:48:52.065 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:482 - Insert source success
2024-11-05 08:48:52.068 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:483 - Time insert cam: 0.030996322631835938
2024-11-05 08:48:52.071 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1118', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))], message: deepstream-0.vss:9089, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a
2024-11-05 08:48:52.143 | INFO     | app.modules.camera_management.services.services:add_camera:508 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 497, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 109, in add_cam_pipeline
    if add_cam(self.logger, streaming):
NameError: name 'add_cam' is not defined

2024-11-05 09:23:38.188 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 09:23:38.191 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 09:23:38.195 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 09:23:38.198 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1111", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 09:23:38.223 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 09:23:38.226 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 09:23:39.638 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.4087295532226562
2024-11-05 09:23:39.643 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 09:23:39.657 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 09:23:39.661 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 09:23:39.663 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 09:23:39.667 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.007434368133544922
2024-11-05 09:23:39.670 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 09:23:39.688 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.01226186752319336
2024-11-05 09:23:39.690 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0019526481628417969
2024-11-05 09:23:39.722 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': True, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1119', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1118', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 09:23:39.725 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 09:23:39.730 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.004834890365600586
2024-11-05 09:23:39.733 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.059316158294677734
2024-11-05 09:23:39.736 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.06229543685913086
2024-11-05 09:23:39.740 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.0801396369934082
2024-11-05 09:23:39.743 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 1.1920928955078125e-05
2024-11-05 09:23:39.746 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 8, 'solution': 'human_intrusion'}]
2024-11-05 09:23:39.749 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.08952808380126953
2024-11-05 09:23:39.751 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 8, 'solution': 'human_intrusion'}
2024-11-05 09:23:39.759 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 09:23:39.762 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 09:23:39.765 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 09:23:39.768 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 09:23:39.790 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [200]>, {"message":"Insert Source Successfully"}
2024-11-05 09:23:39.792 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:482 - Insert source success
2024-11-05 09:23:39.795 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:483 - Time insert cam: 0.03092789649963379
2024-11-05 09:23:39.799 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))], message: deepstream-0.vss:9089, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1
2024-11-05 09:23:39.856 | INFO     | app.modules.camera_management.services.services:add_camera:508 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 497, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 109, in add_cam_pipeline
    if self.add_cam(self.logger, streaming):
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
TypeError: CameraManagementService.add_cam() takes 2 positional arguments but 3 were given

2024-11-05 09:24:49.674 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 09:24:49.674 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 09:24:49.677 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 09:24:49.681 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "1111", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 09:24:49.696 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 09:24:49.699 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 09:24:50.800 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.0969488620758057
2024-11-05 09:24:50.804 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/6454393199984ac38a8db8a1f913de99', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 09:24:50.817 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 09:24:50.821 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 09:24:50.826 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 09:24:50.830 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.010010719299316406
2024-11-05 09:24:50.834 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 09:24:50.849 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.007971525192260742
2024-11-05 09:24:50.851 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0034291744232177734
2024-11-05 09:24:50.856 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': True, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1111', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1119', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1118', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 09:24:50.860 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 09:24:50.864 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.004340648651123047
2024-11-05 09:24:50.867 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.029569625854492188
2024-11-05 09:24:50.871 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.033394813537597656
2024-11-05 09:24:50.874 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.05434823036193848
2024-11-05 09:24:50.878 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 2.3365020751953125e-05
2024-11-05 09:24:50.882 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 7, 'solution': 'human_intrusion'}]
2024-11-05 09:24:50.885 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.06552672386169434
2024-11-05 09:24:50.888 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 7, 'solution': 'human_intrusion'}
2024-11-05 09:24:50.900 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 09:24:50.902 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='1111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/6454393199984ac38a8db8a1f913de99', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 09:24:50.906 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/6454393199984ac38a8db8a1f913de99', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 09:24:50.909 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '1111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/6454393199984ac38a8db8a1f913de99', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 09:24:50.918 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [653]>, {
    "message": "Source id existed"
}
2024-11-05 09:24:50.921 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/6454393199984ac38a8db8a1f913de99
2024-11-05 09:24:50.925 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:128 - Add Fail
2024-11-05 09:26:05.362 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 09:26:05.364 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 09:26:05.368 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 09:26:05.372 | INFO     | app.modules.camera_management.services.services:add_camera:493 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "111111", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 09:26:05.387 | INFO     | app.modules.camera_management.services.services:add_camera:495 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 09:26:05.389 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:101 - Add cam
2024-11-05 09:26:06.485 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.0914397239685059
2024-11-05 09:26:06.488 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/a7700795f7b4497f94c7f0ad030a1406', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 09:26:06.499 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 09:26:06.502 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 09:26:06.504 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 09:26:06.508 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.0069463253021240234
2024-11-05 09:26:06.511 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 09:26:06.523 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.00583195686340332
2024-11-05 09:26:06.526 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0031020641326904297
2024-11-05 09:26:06.530 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': True, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1111', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1119', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1118', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 09:26:06.533 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 09:26:06.538 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.00501251220703125
2024-11-05 09:26:06.541 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.026835918426513672
2024-11-05 09:26:06.546 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.031845808029174805
2024-11-05 09:26:06.549 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.04841327667236328
2024-11-05 09:26:06.552 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 2.6464462280273438e-05
2024-11-05 09:26:06.555 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 7, 'solution': 'human_intrusion'}]
2024-11-05 09:26:06.559 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.05782938003540039
2024-11-05 09:26:06.561 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 7, 'solution': 'human_intrusion'}
2024-11-05 09:26:06.570 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 09:26:06.573 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/a7700795f7b4497f94c7f0ad030a1406', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 09:26:06.577 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '111111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a7700795f7b4497f94c7f0ad030a1406', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 09:26:06.580 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '111111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a7700795f7b4497f94c7f0ad030a1406', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 09:26:06.604 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [200]>, {"message":"Insert Source Successfully"}
2024-11-05 09:26:06.606 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:482 - Insert source success
2024-11-05 09:26:06.611 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:483 - Time insert cam: 0.034505605697631836
2024-11-05 09:26:06.614 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:106 - src_list: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/a7700795f7b4497f94c7f0ad030a1406', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))], message: deepstream-0.vss:9089, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/a7700795f7b4497f94c7f0ad030a1406
2024-11-05 09:26:06.633 | INFO     | app.modules.camera_management.services.services:add_camera:508 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 497, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 109, in add_cam_pipeline
    if self.add_cam(streaming):
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/services.py", line 208, in add_cam
    source=rtsp_url_encoding(request.cam_info.source),
NameError: name 'rtsp_url_encoding' is not defined

2024-11-05 09:27:03.147 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 09:27:03.148 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 09:27:03.151 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 09:27:03.154 | INFO     | app.modules.camera_management.services.services:add_camera:494 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "111111", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 09:27:03.175 | INFO     | app.modules.camera_management.services.services:add_camera:496 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 09:27:03.178 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:102 - Add cam
2024-11-05 09:27:04.265 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.0840153694152832
2024-11-05 09:27:04.270 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/d03c086d253f411e8720019604438bf7', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 09:27:04.276 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 09:27:04.280 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 09:27:04.282 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 09:27:04.285 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.0066986083984375
2024-11-05 09:27:04.288 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 09:27:04.298 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.003950834274291992
2024-11-05 09:27:04.300 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.002922534942626953
2024-11-05 09:27:04.304 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': True, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a7700795f7b4497f94c7f0ad030a1406', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'string', 'source_id': '111111', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1111', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1119', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1118', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 09:27:04.307 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 09:27:04.312 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.004984140396118164
2024-11-05 09:27:04.315 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.024129152297973633
2024-11-05 09:27:04.318 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.027083158493041992
2024-11-05 09:27:04.321 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.0430452823638916
2024-11-05 09:27:04.324 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 1.2874603271484375e-05
2024-11-05 09:27:04.327 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}]
2024-11-05 09:27:04.330 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.052262067794799805
2024-11-05 09:27:04.333 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}
2024-11-05 09:27:04.341 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 09:27:04.345 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111111', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/d03c086d253f411e8720019604438bf7', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 09:27:04.349 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '111111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/d03c086d253f411e8720019604438bf7', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 09:27:04.353 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '111111', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/d03c086d253f411e8720019604438bf7', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 09:27:04.362 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [653]>, {
    "message": "Source id existed"
}
2024-11-05 09:27:04.366 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:107 - src_list: False, message: Add Fail, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/d03c086d253f411e8720019604438bf7
2024-11-05 09:27:04.369 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:129 - Add Fail
2024-11-05 09:27:13.141 | INFO     | app.modules.camera_management.routers.router:add_camera:43 - ===== Add Camera =====
2024-11-05 09:27:13.143 | INFO     | app.modules.camera_management.routers.router:add_camera:44 - Client IP: 172.23.0.1
2024-11-05 09:27:13.148 | INFO     | app.modules.camera_management.routers.router:add_camera:45 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-05 09:27:13.157 | INFO     | app.modules.camera_management.services.services:add_camera:494 - Request: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "HI", "cam_info": {"cam_id": "111112", "location": "string", "source": "rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-05 09:27:13.162 | INFO     | app.modules.camera_management.services.services:add_camera:496 - source: None, source request: rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4
2024-11-05 09:27:13.165 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:102 - Add cam
2024-11-05 09:27:14.462 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:378 - Time check link rtsp exist: 1.2939550876617432
2024-11-05 09:27:14.467 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:451 - sources: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111112', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/579eb13b63244b3da2af63dec0a7f464', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTIiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]
2024-11-05 09:27:14.478 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:461 - request_solution: human_intrusion
2024-11-05 09:27:14.481 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:187 - pod_list: [{'_id': ObjectId('66f39596449f9ccae2f4e3d9'), 'service_port': '9089', 'pod_name': 'deepstream-0', 'pod_service_name': 'vss'}]
2024-11-05 09:27:14.485 | INFO     | app.modules.camera_management.deepstream.deepstream:get_instance_list:189 - ['deepstream-0.vss:9089']
2024-11-05 09:27:14.488 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:211 - ===Time get instance list: 0.00797271728515625
2024-11-05 09:27:14.491 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:212 - instance_list: ['deepstream-0.vss:9089']
2024-11-05 09:27:14.499 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:246 - ===Time get number camera: 0.002559185028076172
2024-11-05 09:27:14.503 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:247 - ===Time get all config: 0.0026247501373291016
2024-11-05 09:27:14.506 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:248 - all_config: {'benchmark': {'batch_size_list': [1], 'period': 300, 'solution_test': {}}, 'common': {'cache_size': 150, 'config_directory': 'backup', 'cudadec_mem_type': 0, 'nvbuf_memory_type': 0, 'video_uri': ''}, 'debug': {'benchmark': False, 'rtsp_out': True, 'show_message': False}, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'logging': {'debug': True, 'directory': 'va', 'file_path': 'logs/vss.log', 'level': 'debug', 'log_event': False, 'rotation_hour': 23, 'rotation_minute': 59, 'to_console': True, 'to_file': True}, 'measurement': {'enable': True, 'interval': 1}, 'model': {'max_batch_size': 10, 'model_directory': 'models', 'repository_uri': 'http://172.19.20.177:3621', 'use_max_batch_size': True, 'use_model_repository': False}, 'osd': {'confidence': 0.6000000238418579, 'line': True, 'zone': True}, 'server': {'host': '0.0.0.0', 'port': 9089}, 'sink': {'common': {'batch': True, 'bitrate': 4000000, 'container': 'Nothing to set', 'enable': True, 'encoder': 'H264', 'encoder_resource': 'hard_ware', 'gpu_id': 0, 'iframeinterval': 0, 'profile': 0, 'rtsp_port': 8554, 'sink_type': 'fake', 'sync': 1, 'udp_buffer_size': 0}}, 'smart_record': {'cache_size': 5, 'directory': 'records/', 'duration': 10}, 'solution': {'name': 'human_intrusion', 'options': {'ITS': '1.0.0', 'face_attributes': '1.0.0', 'face_detection': '1.0.0', 'fisheye_person_detection': '1.0.0', 'head_detection': '1.0.0', 'human_intrusion': '1.0.0', 'parking_lot': '1.0.0', 'plate_recognition': '1.0.0', 'thermal_human_intrusion': '1.0.0'}}, 'source': {'source_list': [{'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/a7700795f7b4497f94c7f0ad030a1406', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTEiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'si_id': 'string', 'source_id': '111111', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/c0ad61406fad438da90c16481a3549c1', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExIiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1111', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis-master', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/ba811436f22d4156907b3b817e8a989f', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE5IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1119', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}, {'accessKey': 'string', 'ai_streaming_out': True, 'dispatcher': {'file_storage': {'S3': {'access_key_id': 'admin', 'bucket_name': 'vss', 'enable': True, 'has_ssl': False, 'host': 'minio', 'port': 9000, 'save_directory': 'hi', 'secret_key': '123456a@'}, 'type': 'S3'}, 'message_broker': {'Redis': {'actor_name': 'human_intrusion', 'enable': True, 'host': 'redis', 'password': '123456a@', 'port': 6379, 'queue_name': 'hi'}, 'type': 'Redis'}}, 'drop_frame_interval': 2, 'enable': True, 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/f146e0a9927a4f07a2948fc637c9cb4a', 'filter': {'bbox_area': {'area_ratio_threshold': 0.003000000026077032, 'enable': False}, 'bbox_size': {'enable': True, 'height_threshold': 30, 'width_threshold': 15}, 'confidence': {'enable': True, 'threshold': 0.6000000238418579}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'gpu_id': 0, 'group_id': 'string', 'hi_config': None, 'location': 'string', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTE4IiwgImxvY2F0aW9uIjogInN0cmluZyIsICJzb3VyY2UiOiAicnRzcDovLzE3Mi4xOS4yMC4yMDA6MzE1NTQvbnZzdHJlYW0vaG9tZS92c3QvdnN0X3JlbGVhc2Uvc3RyZWFtZXJfdmlkZW9zL0ZSXzE0MS5tcDQiLCAiYWNjZXNzS2V5IjogInN0cmluZyIsICJlbmRwb2ludCI6ICJzdHJpbmciLCAiYWlfc3RyZWFtaW5nX291dCI6IHRydWUsICJ2aWRlb19ldmVudCI6IHRydWV9LCAiYWlfY29uZmlnIjogeyJkaXN0X3R5cGUiOiAic3RyaW5nIiwgImF0dHJpYnV0ZSI6IFsic3RyaW5nIl0sICJsYW5kbWFyayI6IHRydWUsICJsaW1pdGF0aW9uIjogMCwgIm1pbl9zaXplIjogMjAsICJtYXhfc2l6ZSI6IDUwMCwgIm5tc190aHJlc2hvbGQiOiAwLjUsICJjb25mX3RocmVzaG9sZCI6IDAuNX0sICJoaV9jb25maWciOiB7InpvbmVzIjogW10sICJsaW5lcyI6IFtdLCAidGltZV9pbnRlcnZhbCI6IDMwLjAsICJvdmVybGFwX3RocmVzaG9sZCI6IDAuNSwgIm1hcmdpbiI6IDEwLjAsICJ0aW1lX3RocmVzaG9sZCI6IDYwLjB9fQ==', 'si_id': 'string', 'source_id': '1118', 'type': 'rtsp', 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'user_id': 'string', 'video_event': True}], 'streamuxer': {'batched_push_timeout': 4000, 'enable_padding': 0, 'fps_d': 1, 'fps_n': 10, 'gpu_id': 0, 'height': 1080, 'width': 1920}}, 'tiler': {'columns': 1, 'gpu_id': 0, 'height': 1080, 'rows': 1, 'show_source': 0, 'width': 1920}, 'tracking': {'display_tracking_id': True, 'enable': False, 'enable_batch_process': True, 'enable_past_frame': True, 'gpu_id': 0, 'height': 384, 'll_config_file': 'apps/deepstream_app/configs/config_tracker_NvSORT.yml', 'll_lib_file': '/opt/nvidia/deepstream/deepstream/lib/libnvds_nvmultiobjecttracker.so', 'width': 640}, 'version': {'deepstream': '6.4.0', 'device': 'Quadro P4000', 'tensorrt': '8.6.1', 'vss': '0.0.1'}}
2024-11-05 09:27:14.509 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:259 - config: human_intrusion
2024-11-05 09:27:14.514 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:262 - =====Time 1: 0.005048036575317383
2024-11-05 09:27:14.519 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:266 - ===Time 11: 0.024991512298583984
2024-11-05 09:27:14.522 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:279 - =====Time 2: 0.027878284454345703
2024-11-05 09:27:14.525 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:297 - =====Time all check instance ds: 0.044368743896484375
2024-11-05 09:27:14.527 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:298 - =====Time sort instance: 8.106231689453125e-06
2024-11-05 09:27:14.530 | INFO     | app.modules.camera_management.deepstream.deepstream:check_instance_ds:299 - [{'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}]
2024-11-05 09:27:14.533 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:465 - ====Time check instance ds: 0.053221702575683594
2024-11-05 09:27:14.536 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:472 - instance: {'address': 'deepstream-0.vss:9089', 'slot_available': 6, 'solution': 'human_intrusion'}
2024-11-05 09:27:14.546 | DEBUG    | app.modules.camera_management.deepstream.deepstream:create_config:66 -  Merge config OK
2024-11-05 09:27:14.548 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:478 - new_config: source=Source(source_list=[SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111112', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/579eb13b63244b3da2af63dec0a7f464', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTIiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))]) solution='human_intrusion' dispatcher=Dispatcher(file_storage=Storage(type='S3', S3=StorageConfig(enable=True, host='minio', port=9000, bucket_name='vss', access_key_id='admin', secret_key='123456a@', has_ssl=False, save_directory='hi')), message_broker=MessageBroker(type='Redis', Redis=MessageBrokerConfig(enable=True, host='redis-master', port=6379, password='123456a@', actor_name='human_intrusion', queue_name='hi')))
2024-11-05 09:27:14.552 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:140 - source: {'source': {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '111112', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/579eb13b63244b3da2af63dec0a7f464', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTIiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}, 'solution': 'human_intrusion', 'dispatcher': {'file_storage': {'type': 'S3', 'S3': {'enable': True, 'host': 'minio', 'port': 9000, 'bucket_name': 'vss', 'access_key_id': 'admin', 'secret_key': '123456a@', 'has_ssl': False, 'save_directory': 'hi'}}, 'message_broker': {'type': 'Redis', 'Redis': {'enable': True, 'host': 'redis-master', 'port': 6379, 'password': '123456a@', 'actor_name': 'human_intrusion', 'queue_name': 'hi'}}}}
2024-11-05 09:27:14.555 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:142 - source add: {'source_list': [{'si_id': 'string', 'user_id': 'string', 'group_id': 'string', 'location': 'string', 'source_id': '111112', 'type': 'rtsp', 'enable': True, 'uri': 'rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', 'accessKey': 'string', 'endpoint': 'rtsp://admin:12345678a%40@172.21.5.197:31888/579eb13b63244b3da2af63dec0a7f464', 'message': 'eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTIiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', 'ai_streaming_out': True, 'video_event': True, 'drop_frame_interval': 2, 'gpu_id': 0, 'filter': {'confidence': {'enable': True, 'threshold': 0.6}, 'bbox_size': {'enable': True, 'width_threshold': 15, 'height_threshold': 30}, 'bbox_area': {'enable': False, 'area_ratio_threshold': 0.003}, 'frame_interval': {'enable': True, 'interval': 0.5}, 'goodness_score': {'enable': True, 'threshold': 0.5}}, 'hi_config': {'zones': [], 'lines': [], 'time_interval': 30.0, 'overlap_threshold': 0.5, 'margin': 10.0, 'time_threshold': 60.0}}]}
2024-11-05 09:27:14.579 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_source:148 - res insert source: <Response [200]>, {"message":"Insert Source Successfully"}
2024-11-05 09:27:14.582 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:482 - Insert source success
2024-11-05 09:27:14.585 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:483 - Time insert cam: 0.03365612030029297
2024-11-05 09:27:14.589 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:107 - src_list: [SourceList(si_id='string', user_id='string', group_id='string', location='string', source_id='111112', type='rtsp', enable=True, uri='rtsp://172.19.20.200:31554/nvstream/home/vst/vst_release/streamer_videos/FR_141.mp4', accessKey='string', endpoint='rtsp://admin:12345678a%40@172.21.5.197:31888/579eb13b63244b3da2af63dec0a7f464', message='eyJzaSI6IHsic2lfaWQiOiAic3RyaW5nIiwgInNpX25hbWUiOiAic3RyaW5nIiwgInNpX3Rva2VuIjogInN0cmluZyIsICJzaV9hcGkiOiB7ImVuZHBvaW50IjogInN0cmluZyIsICJtZXRob2QiOiAic3RyaW5nIn19LCAidXNlciI6IHsidXNlcl9pZCI6ICJzdHJpbmciLCAidXNlcl9uYW1lIjogInN0cmluZyIsICJ1c2VyX2dyb3VwIjogInN0cmluZyJ9LCAic2VydmljZV9rZXkiOiAiSEkiLCAiY2FtX2luZm8iOiB7ImNhbV9pZCI6ICIxMTExMTIiLCAibG9jYXRpb24iOiAic3RyaW5nIiwgInNvdXJjZSI6ICJydHNwOi8vMTcyLjE5LjIwLjIwMDozMTU1NC9udnN0cmVhbS9ob21lL3ZzdC92c3RfcmVsZWFzZS9zdHJlYW1lcl92aWRlb3MvRlJfMTQxLm1wNCIsICJhY2Nlc3NLZXkiOiAic3RyaW5nIiwgImVuZHBvaW50IjogInN0cmluZyIsICJhaV9zdHJlYW1pbmdfb3V0IjogdHJ1ZSwgInZpZGVvX2V2ZW50IjogdHJ1ZX0sICJhaV9jb25maWciOiB7ImRpc3RfdHlwZSI6ICJzdHJpbmciLCAiYXR0cmlidXRlIjogWyJzdHJpbmciXSwgImxhbmRtYXJrIjogdHJ1ZSwgImxpbWl0YXRpb24iOiAwLCAibWluX3NpemUiOiAyMCwgIm1heF9zaXplIjogNTAwLCAibm1zX3RocmVzaG9sZCI6IDAuNSwgImNvbmZfdGhyZXNob2xkIjogMC41fSwgImhpX2NvbmZpZyI6IHsiem9uZXMiOiBbXSwgImxpbmVzIjogW10sICJ0aW1lX2ludGVydmFsIjogMzAuMCwgIm92ZXJsYXBfdGhyZXNob2xkIjogMC41LCAibWFyZ2luIjogMTAuMCwgInRpbWVfdGhyZXNob2xkIjogNjAuMH19', ai_streaming_out=True, video_event=True, drop_frame_interval=2, gpu_id=0, filter=Filter(confidence=Confidence_Filter(enable=True, threshold=0.6), bbox_size=Bbox_size_Filter(enable=True, width_threshold=15, height_threshold=30), bbox_area=Bbox_area_Filter(enable=False, area_ratio_threshold=0.003), frame_interval=Frame_interval_Filter(enable=True, interval=0.5), goodness_score=Goodness_score_Filter(enable=True, threshold=0.5)), hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0))], message: deepstream-0.vss:9089, endpoint: rtsp://admin:12345678a@@172.21.5.197:31888/579eb13b63244b3da2af63dec0a7f464
2024-11-05 09:27:14.600 | SUCCESS  | app.modules.camera_management.deepstream.deepstream:update_instance_id:354 - Update instance ID OK
2024-11-05 09:27:14.603 | INFO     | app.modules.camera_management.services.services:add_cam_pipeline:118 - add success
2024-11-07 07:48:52.719 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 07:48:52.720 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x78440d5b86d0>
2024-11-07 07:49:55.186 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 07:49:55.188 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x71becbe68ac0>
2024-11-07 07:49:55.192 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 07:49:55.195 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 07:50:22.801 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 07:50:22.802 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x7bf74fe44b20>
2024-11-07 07:50:22.805 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 07:50:22.808 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 07:50:56.702 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 07:50:56.703 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x7e05403a0ac0>
2024-11-07 07:50:56.706 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 07:50:56.709 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 07:50:56.733 | ERROR    | app.modules.camera_management.services.service_v2:add_camera:105 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v2.py", line 98, in add_camera
    smh_logger.error("Cam info existed")
NameError: name 'smh_logger' is not defined

2024-11-07 07:51:42.439 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 07:51:42.439 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x712bb53d0a60>
2024-11-07 07:51:42.442 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 07:51:42.445 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 07:51:42.461 | ERROR    | app.modules.camera_management.services.service_v2:add_camera:98 - Cam info existed
2024-11-07 07:51:52.906 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 07:51:52.910 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x712bb54152d0>
2024-11-07 07:51:52.913 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 07:51:52.916 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 07:51:52.924 | ERROR    | app.modules.camera_management.services.service_v2:add_camera:98 - Cam info existed
2024-11-07 07:58:08.818 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 07:58:08.821 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x7f8784798b80>
2024-11-07 07:58:08.825 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 07:58:08.828 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 07:58:08.851 | ERROR    | app.modules.camera_management.services.service_v2:add_camera:105 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v2.py", line 69, in add_camera
    check_cam = check_cam_id_exist_smh(self.logger, streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
TypeError: check_cam_id_exist_smh() takes 1 positional argument but 2 were given

2024-11-07 07:59:04.147 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 07:59:04.148 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x729405dc0bb0>
2024-11-07 07:59:04.154 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 07:59:04.158 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 07:59:04.173 | ERROR    | app.modules.camera_management.services.service_v2:add_camera:105 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v2.py", line 69, in add_camera
    check_cam = check_cam_id_exist_smh(self.logger, streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/utils.py", line 228, in check_cam_id_exist_smh
    check_cam = CameraModelSMH.find_one_camera({
AttributeError: type object 'CameraModel' has no attribute 'find_one_camera'

2024-11-07 08:00:30.796 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 08:00:30.796 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x714dfd99cc40>
2024-11-07 08:00:30.803 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 08:00:30.808 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 08:00:30.846 | ERROR    | app.modules.camera_management.services.service_v2:add_camera:105 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v2.py", line 71, in add_camera
    check_subscribe_jf = subscribe_message(self.logger, streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/utils.py", line 311, in subscribe_message
    time_millis, encrypted_str = gen_encrypted()
NameError: name 'gen_encrypted' is not defined

2024-11-07 08:04:08.937 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 08:04:08.937 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x73c8c8e64ca0>
2024-11-07 08:04:08.943 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 08:04:08.949 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 08:04:08.985 | ERROR    | app.modules.camera_management.services.service_v2:add_camera:105 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v2.py", line 71, in add_camera
    check_subscribe_jf = subscribe_message(self.logger, streaming)
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/utils.py", line 335, in subscribe_message
    time_millis, encrypted_str = gen_encrypted()
  File "/usr/lib/python3.10/contextlib.py", line 79, in inner
    return func(*args, **kwds)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/utils.py", line 307, in gen_encrypted
    smh_logger.info(f"time_millis: {time_millis}")
NameError: name 'smh_logger' is not defined

2024-11-07 08:05:24.771 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Adding stream...
2024-11-07 08:05:24.772 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Request: <starlette.requests.Request object at 0x7c9b32f98c40>
2024-11-07 08:05:24.781 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - Client IP: 172.23.0.1
2024-11-07 08:05:24.791 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:38 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-07 08:05:24.814 | INFO     | app.modules.camera_management.utils:gen_encrypted:307 - time_millis: 00000011730966724814
2024-11-07 08:05:24.822 | INFO     | app.modules.camera_management.utils:gen_encrypted:312 - Encrypted String: d20e0119200533dcd6f8f9b63c812059
2024-11-07 08:05:24.829 | INFO     | app.modules.camera_management.utils:get_token_jf:80 - =======Get token
2024-11-07 08:05:24.837 | INFO     | app.modules.camera_management.utils:get_token_jf:105 - URL get token: https://tks.jftechws.com/v2/device/token/00000011730966724814/d20e0119200533dcd6f8f9b63c812059.rs, headers: {'uuid': '6391d1a360b238987546d15b', 'appKey': '8be63935645fc1210c6bea6a90e7a64e', 'Content-Type': 'application/json'}, data: {'sns': ['1'], 'userId': 'string'}
2024-11-07 08:05:29.909 | ERROR    | app.modules.camera_management.utils:get_token_jf:109 - Request timeout
2024-11-07 08:05:30.014 | INFO     | app.modules.camera_management.utils:subscribe_message:345 - Time get token: 5.184862375259399
2024-11-07 08:05:30.022 | INFO     | app.modules.camera_management.utils:subscribe_message:386 - Error get token
2024-11-07 08:05:30.029 | ERROR    | app.modules.camera_management.services.service_v2:add_camera:91 - Error get token
2024-11-15 10:16:29.098 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:34 - Adding stream...
2024-11-15 10:16:29.101 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:35 - Request: <starlette.requests.Request object at 0x7812a9e0a380>
2024-11-15 10:16:29.111 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:36 - Client IP: 172.23.0.1
2024-11-15 10:16:29.114 | INFO     | app.modules.camera_management.routers.router_v2:add_camera:37 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-15 10:16:29.134 | INFO     | app.modules.camera_management.utils:gen_encrypted:372 - time_millis: 00000011731665789134
2024-11-15 10:16:29.139 | INFO     | app.modules.camera_management.utils:gen_encrypted:375 - Encrypted String: 36ab6d501877250c35d8d4c3eb7fc493
2024-11-15 10:16:29.143 | INFO     | app.modules.camera_management.utils:get_token_jf:88 - =======Get token
2024-11-15 10:16:29.146 | INFO     | app.modules.camera_management.utils:get_token_jf:106 - URL get token: https://tks.jftechws.com/v2/device/token/00000011731665789134/36ab6d501877250c35d8d4c3eb7fc493.rs, headers: {'uuid': '6391d1a360b238987546d15b', 'appKey': '8be63935645fc1210c6bea6a90e7a64e', 'Content-Type': 'application/json'}, data: {'sns': ['string'], 'userId': 'string'}
2024-11-15 10:16:34.244 | ERROR    | app.modules.camera_management.utils:get_token_jf:110 - Request timeout
2024-11-15 10:16:34.356 | INFO     | app.modules.camera_management.utils:subscribe_message:414 - Time get token: 5.21313214302063
2024-11-15 10:16:34.359 | INFO     | app.modules.camera_management.utils:subscribe_message:454 - Error get token
2024-11-15 10:16:34.362 | ERROR    | app.modules.camera_management.services.service_v2:add_camera:95 - Error get token
2024-11-15 10:16:41.562 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:28 - Client IP: 172.23.0.1
2024-11-15 10:16:41.566 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:29 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-15 10:16:41.572 | INFO     | app.modules.camera_management.services.service_v3:add_camera:446 - streaming: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string"}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-15 10:16:41.577 | INFO     | app.modules.camera_management.services.service_v3:add_camera:458 - Error: check_cam_id_exist() missing 1 required positional argument: 'request'
2024-11-15 10:17:55.737 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:28 - Client IP: 172.23.0.1
2024-11-15 10:17:55.737 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:29 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-15 10:17:55.743 | INFO     | app.modules.camera_management.services.service_v3:add_camera:446 - streaming: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string"}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-15 10:17:55.760 | INFO     | app.modules.camera_management.services.service_v3:add_camera:458 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v3.py", line 447, in add_camera
    check_cam, source_uri = check_cam_id_exist(streaming)
  File "/workspace/refactor/vss_controller/app/utils/decorators/auto_tracing.py", line 42, in wrapper
    return func(*args, **kwargs)
TypeError: check_cam_id_exist() missing 1 required positional argument: 'request'

2024-11-15 10:22:58.204 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:28 - Client IP: 172.23.0.1
2024-11-15 10:22:58.207 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:29 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-15 10:22:58.211 | INFO     | app.modules.camera_management.services.service_v3:add_camera:446 - streaming: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string"}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-15 10:22:58.239 | INFO     | app.modules.camera_management.services.service_v3:add_camera:458 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v3.py", line 448, in add_camera
    self.logger.info(f"source: {source_uri}, source request: {str(streaming.cam_info.source)}")
AttributeError: 'CameraInfo' object has no attribute 'source'

2024-11-15 10:25:03.252 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:28 - Client IP: 172.23.0.1
2024-11-15 10:25:03.252 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:29 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-15 10:25:03.257 | INFO     | app.modules.camera_management.services.service_v3:add_camera:446 - streaming: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string"}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-15 10:25:03.281 | INFO     | app.modules.camera_management.services.service_v3:add_camera:448 - si=SI_Data(si_id='string', si_name='string', si_token='string', si_api=SI_API(endpoint='string', method='string')) user=User_Data(user_id='string', user_name='string', user_group='string') service_key='string' cam_info=CameraInfo(cam_id='string') ai_config=AIConfig(dist_type='string', attribute=['string'], landmark=True, limitation=0, min_size=20, max_size=500, nms_threshold=0.5, conf_threshold=0.5) hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0)
2024-11-15 10:25:03.292 | INFO     | app.modules.camera_management.services.service_v3:add_camera:459 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v3.py", line 449, in add_camera
    self.logger.info(f"source: {source_uri}, source request: {str(streaming.cam_info.source)}")
AttributeError: 'CameraInfo' object has no attribute 'source'

2024-11-15 10:28:47.706 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:28 - Client IP: 172.23.0.1
2024-11-15 10:28:47.710 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:29 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-15 10:28:47.714 | INFO     | app.modules.camera_management.services.service_v3:add_camera:446 - streaming: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string"}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-15 10:28:47.733 | INFO     | app.modules.camera_management.services.service_v3:add_camera:448 - si=SI_Data(si_id='string', si_name='string', si_token='string', si_api=SI_API(endpoint='string', method='string')) user=User_Data(user_id='string', user_name='string', user_group='string') service_key='string' cam_info=CameraInfo(cam_id='string') ai_config=AIConfig(dist_type='string', attribute=['string'], landmark=True, limitation=0, min_size=20, max_size=500, nms_threshold=0.5, conf_threshold=0.5) hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0)
2024-11-15 10:28:47.764 | INFO     | app.modules.camera_management.services.service_v3:add_camera:458 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v3.py", line 450, in add_camera
    status_code = add_cam_pipeline(streaming)
NameError: name 'add_cam_pipeline' is not defined

2024-11-15 10:29:41.367 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:28 - Client IP: 172.23.0.1
2024-11-15 10:29:41.372 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:29 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-15 10:29:41.377 | INFO     | app.modules.camera_management.services.service_v3:add_camera:446 - streaming: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string"}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-15 10:29:41.397 | INFO     | app.modules.camera_management.services.service_v3:add_camera:448 - si=SI_Data(si_id='string', si_name='string', si_token='string', si_api=SI_API(endpoint='string', method='string')) user=User_Data(user_id='string', user_name='string', user_group='string') service_key='string' cam_info=CameraInfo(cam_id='string') ai_config=AIConfig(dist_type='string', attribute=['string'], landmark=True, limitation=0, min_size=20, max_size=500, nms_threshold=0.5, conf_threshold=0.5) hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0)
2024-11-15 10:29:41.402 | INFO     | app.modules.camera_management.services.service_v3:add_cam_pipeline:361 - Add cam
2024-11-15 10:29:41.447 | INFO     | app.modules.camera_management.services.service_v3:add_camera:458 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v3.py", line 450, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/workspace/refactor/vss_controller/app/utils/decorators/auto_tracing.py", line 42, in wrapper
    return func(*args, **kwargs)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v3.py", line 362, in add_cam_pipeline
    info = DSClient.insert_cam(streaming, None)
  File "/workspace/refactor/vss_controller/app/utils/decorators/auto_tracing.py", line 42, in wrapper
    return func(*args, **kwargs)
TypeError: DSClient.insert_cam() missing 1 required positional argument: 'endpoint'

2024-11-15 10:32:03.853 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:28 - Client IP: 172.23.0.1
2024-11-15 10:32:03.854 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:29 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-15 10:32:03.862 | INFO     | app.modules.camera_management.services.service_v3:add_camera:446 - streaming: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string"}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-15 10:32:03.888 | INFO     | app.modules.camera_management.services.service_v3:add_camera:448 - si=SI_Data(si_id='string', si_name='string', si_token='string', si_api=SI_API(endpoint='string', method='string')) user=User_Data(user_id='string', user_name='string', user_group='string') service_key='string' cam_info=CameraInfo(cam_id='string') ai_config=AIConfig(dist_type='string', attribute=['string'], landmark=True, limitation=0, min_size=20, max_size=500, nms_threshold=0.5, conf_threshold=0.5) hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0)
2024-11-15 10:32:03.892 | INFO     | app.modules.camera_management.services.service_v3:add_cam_pipeline:361 - Add cam
2024-11-15 10:32:03.916 | INFO     | app.modules.camera_management.services.service_v3:add_camera:458 - Error: Traceback (most recent call last):
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v3.py", line 450, in add_camera
    status_code = self.add_cam_pipeline(streaming)
  File "/workspace/refactor/vss_controller/app/utils/decorators/auto_tracing.py", line 42, in wrapper
    return func(*args, **kwargs)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/services/service_v3.py", line 362, in add_cam_pipeline
    info = DSClient.insert_cam(self.logger, streaming, None)
  File "/workspace/refactor/vss_controller/app/utils/decorators/auto_tracing.py", line 42, in wrapper
    return func(*args, **kwargs)
  File "/workspace/refactor/vss_controller/app/modules/camera_management/deepstream/deepstream.py", line 372, in insert_cam
    uri=str(request.cam_info.source)
AttributeError: 'CameraInfo' object has no attribute 'source'

2024-11-15 10:48:16.652 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:28 - Client IP: 172.23.0.1
2024-11-15 10:48:16.652 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:29 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-15 10:48:16.656 | INFO     | app.modules.camera_management.services.service_v3:add_camera:446 - streaming: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-15 10:48:16.674 | INFO     | app.modules.camera_management.services.service_v3:add_camera:448 - si=SI_Data(si_id='string', si_name='string', si_token='string', si_api=SI_API(endpoint='string', method='string')) user=User_Data(user_id='string', user_name='string', user_group='string') service_key='string' cam_info=CameraInfo(cam_id='string', location='string', source='string', accessKey='string', endpoint='string', ai_streaming_out=True, video_event=True) ai_config=AIConfig(dist_type='string', attribute=['string'], landmark=True, limitation=0, min_size=20, max_size=500, nms_threshold=0.5, conf_threshold=0.5) hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0)
2024-11-15 10:48:16.677 | INFO     | app.modules.camera_management.services.service_v3:add_cam_pipeline:361 - Add cam
2024-11-15 10:48:16.886 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Link rtsp failed
2024-11-15 10:48:16.889 | INFO     | app.modules.camera_management.services.service_v3:add_cam_pipeline:366 - src_list: False, message: Link rtsp failed, endpoint: 
2024-11-15 10:48:16.893 | INFO     | app.modules.camera_management.services.service_v3:add_cam_pipeline:388 - Link rtsp failed
2024-11-18 02:36:11.165 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:28 - Client IP: 172.23.0.1
2024-11-18 02:36:11.168 | INFO     | app.modules.camera_management.routers.router_v3:add_camera:29 - User-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/117.0.0.0 Safari/537.36
2024-11-18 02:36:11.180 | INFO     | app.modules.camera_management.services.service_v3:add_camera:446 - streaming: {"si": {"si_id": "string", "si_name": "string", "si_token": "string", "si_api": {"endpoint": "string", "method": "string"}}, "user": {"user_id": "string", "user_name": "string", "user_group": "string"}, "service_key": "string", "cam_info": {"cam_id": "string", "location": "string", "source": "string", "accessKey": "string", "endpoint": "string", "ai_streaming_out": true, "video_event": true}, "ai_config": {"dist_type": "string", "attribute": ["string"], "landmark": true, "limitation": 0, "min_size": 20, "max_size": 500, "nms_threshold": 0.5, "conf_threshold": 0.5}, "hi_config": {"zones": [], "lines": [], "time_interval": 30.0, "overlap_threshold": 0.5, "margin": 10.0, "time_threshold": 60.0}}
2024-11-18 02:36:11.194 | INFO     | app.modules.camera_management.services.service_v3:add_camera:448 - si=SI_Data(si_id='string', si_name='string', si_token='string', si_api=SI_API(endpoint='string', method='string')) user=User_Data(user_id='string', user_name='string', user_group='string') service_key='string' cam_info=CameraInfo(cam_id='string', location='string', source='string', accessKey='string', endpoint='string', ai_streaming_out=True, video_event=True) ai_config=AIConfig(dist_type='string', attribute=['string'], landmark=True, limitation=0, min_size=20, max_size=500, nms_threshold=0.5, conf_threshold=0.5) hi_config=HIConfig(zones=[], lines=[], time_interval=30.0, overlap_threshold=0.5, margin=10.0, time_threshold=60.0)
2024-11-18 02:36:11.198 | INFO     | app.modules.camera_management.services.service_v3:add_cam_pipeline:361 - Add cam
2024-11-18 02:36:11.833 | INFO     | app.modules.camera_management.deepstream.deepstream:insert_cam:377 - Link rtsp failed
2024-11-18 02:36:11.837 | INFO     | app.modules.camera_management.services.service_v3:add_cam_pipeline:366 - src_list: False, message: Link rtsp failed, endpoint: 
2024-11-18 02:36:11.841 | INFO     | app.modules.camera_management.services.service_v3:add_cam_pipeline:388 - Link rtsp failed
